{"ast":null,"code":"import _objectSpread from\"/Users/raymeind/mini-etf/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback}from'react';import{ethers}from'ethers';import'./ChainlinkFeeds.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function ChainlinkFeeds(_ref){var _availableFeeds$curre,_calculatePriceBands,_calculatePriceBands2,_calculatePriceBands3,_calculatePriceBands4;let{account,provider,signer,isConnected,currentNetwork}=_ref;const[feeds,setFeeds]=useState([]);const[selectedFeeds,setSelectedFeeds]=useState([]);const[loading,setLoading]=useState(false);const[isFetching,setIsFetching]=useState(false);// Prevent multiple simultaneous fetches\nconst[searchTerm,setSearchTerm]=useState('');const[filterCategory,setFilterCategory]=useState('all');const[basketPrice,setBasketPrice]=useState(null);const[basketCalculation,setBasketCalculation]=useState(null);const[showBasketCalculator,setShowBasketCalculator]=useState(false);// Common Chainlink price feeds for different networks - Optimized for ETF Basket Trading\nconst availableFeeds={'0x5':[// Goerli\n{address:'0xD4a33860578De61DBAbDc8BFdb98FD742fA7028e',name:'ETH',description:'Ethereum to USD Price Feed',decimals:8,category:'crypto',weight:0.40},{address:'0x779877A7B0D9E8603169DdbD7836e478b4624789',name:'LINK',description:'Chainlink to USD Price Feed',decimals:8,category:'crypto',weight:0.20},{address:'0xA39434A63A52E749F02807ae27335515BA9b2F6F',name:'BTC',description:'Bitcoin to USD Price Feed',decimals:8,category:'crypto',weight:0.40}],'0xaa36a7':[// Sepolia\n{address:'0x694AA1769357215DE4FAC081bf1f309aDC325306',name:'ETH',description:'Ethereum to USD Price Feed',decimals:8,category:'crypto',weight:0.40},{address:'0xc59E3633BAAC79493d08e8bD3f9731fD61B3C326',name:'LINK',description:'Chainlink to USD Price Feed',decimals:8,category:'crypto',weight:0.20},{address:'0x1b44F3514812d835EB1BDB2acE6093a1F3e060A9',name:'BTC',description:'Bitcoin to USD Price Feed',decimals:8,category:'crypto',weight:0.40}],'0x13881':[// Mumbai\n{address:'0x0715A7794a1dc8e42615F059dD6e406A6594651A',name:'ETH',description:'Ethereum to USD Price Feed',decimals:8,category:'crypto',weight:0.40},{address:'0x12162c3E810393dECEc62aA165f3Df2c08FbF4E8',name:'LINK',description:'Chainlink to USD Price Feed',decimals:8,category:'crypto',weight:0.20},{address:'0x007A22900a3B98143368Bd7874Bc93c557e4e408',name:'BTC',description:'Bitcoin to USD Price Feed',decimals:8,category:'crypto',weight:0.40}]};// Chainlink ABI for price feeds\nconst chainlinkABI=[\"function latestRoundData() external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)\",\"function decimals() external view returns (uint8)\",\"function description() external view returns (string memory)\"];// Your deployed contract addresses\nconst CONTRACT_ADDRESSES={basketPricer:'0x9be9Edb609F164088141642ac14437672FbA47b2',feedAggregator:'0x947C3c632BDea7511aB8fDb419592993F80992dd',predictionMarketFactory:'0x29d1eBDa71C3d2B62CA2b6F275B1658077bB09DD',claimTokens:'0x31d1e2d63169cC9e9910DDe53c62097bB5eE01Da',collateral:'0x0000000000000000000000000000000000000000'// TODO: Add your USDC/collateral address\n};// NOTE: These contracts are deployed on the network you're currently connected to\n// Make sure you're on the correct network (Sepolia, Goerli, or Mumbai) to interact with them\n// Contract ABIs\nconst basketPricerABI=[\"function calculateWeightedBasketPrice(string[] calldata symbols, int256[] calldata w1e18) external view returns (int256 etfPrice)\",\"function boundsForBand(int256 etfPrice, uint16 bandBps) external pure returns (int256 lower1e18, int256 upper1e18)\",\"function quoteAndBounds(string[] calldata symbols, int256[] calldata w1e18, uint16 bandBps) external view returns (int256 etfPrice, int256 lower, int256 upper)\"];const feedAggregatorABI=[\"function getPrices(string[] calldata symbols) external view returns (int256[] memory prices, uint8[] memory decimals, uint256[] memory updatedAts)\",\"function addFeedMapping(string memory symbol, address aggregator, uint48 maxDelay) external\",\"function owner() external view returns (address)\",\"error UnknownFeed(string symbol)\",\"error StalePrice(string symbol, uint256 updatedAt, uint256 nowTs, uint256 maxDelay)\"];const predictionMarketFactoryABI=[\"function create(string[] calldata symbols, int256[] calldata w1e18, uint16 bandBps, uint64 settleTs) external returns (address mkt, address vault)\",\"function marketsByCreator(address creator) external view returns (address[] memory)\",\"function allMarkets() external view returns (address[] memory)\",\"event MarketCreated(address indexed market, address indexed creator, address vault, uint256 withinId, uint256 outsideId, int256 strike1e18, int256 lower1e18, int256 upper1e18, uint16 bandBps, uint64 settleTs)\"];const predictionMarketABI=[\"function symbols() external view returns (string[] memory)\",\"function w1e18() external view returns (int256[] memory)\",\"function strike() external view returns (int256)\",\"function lower() external view returns (int256)\",\"function upper() external view returns (int256)\",\"function bandBps() external view returns (uint16)\",\"function settleTs() external view returns (uint64)\",\"function outcome() external view returns (uint8)\",\"function finalPrice() external view returns (int256)\",\"function settle() external\"];useEffect(()=>{if(currentNetwork&&currentNetwork.chainId){console.log('Network changed, loading feeds for chain ID:',currentNetwork.chainId);const networkFeeds=availableFeeds[currentNetwork.chainId]||[];console.log('Available feeds for this network:',networkFeeds);// Validate that all addresses are unique and properly formatted\nconst validFeeds=networkFeeds.filter(feed=>{try{if(ethers){const checksummedAddress=ethers.getAddress(feed.address);console.log(\"\\u2713 Valid address for \".concat(feed.name,\": \").concat(feed.address,\" -> \").concat(checksummedAddress));return true;}console.log(\"\\u2717 No ethers available for \".concat(feed.name));return false;}catch(error){console.error(\"\\u2717 Invalid address for feed \".concat(feed.name,\":\"),feed.address,error);return false;}});console.log('Valid feeds after address validation:',validFeeds);// Debug: Check feed properties\nvalidFeeds.forEach(feed=>{console.log(\"Feed \".concat(feed.name,\":\"),{address:feed.address,weight:feed.weight,weightType:typeof feed.weight,decimals:feed.decimals,category:feed.category});});// Remove duplicates\nconst addresses=validFeeds.map(f=>f.address);const uniqueAddresses=new Set(addresses);if(addresses.length!==uniqueAddresses.size){console.error('Duplicate addresses found in feeds:',addresses);// Remove duplicates by keeping only the first occurrence\nconst uniqueFeeds=validFeeds.filter((feed,index)=>addresses.indexOf(feed.address)===index);console.log('Setting feeds with duplicates removed:',uniqueFeeds);setFeeds(uniqueFeeds);}else{console.log('Setting feeds (all addresses valid and unique):',validFeeds);setFeeds(validFeeds);}}},[currentNetwork,ethers]);// Utility function to safely convert any value to a number\nconst safeNumberConversion=value=>{if(typeof value==='bigint'){return Number(value);}if(typeof value==='string'){const parsed=parseFloat(value);return isNaN(parsed)?null:parsed;}if(typeof value==='number'&&!isNaN(value)){return value;}return null;};// Utility function to safely format BigInt or string values for display\nconst safeFormatUnits=function(value){let decimals=arguments.length>1&&arguments[1]!==undefined?arguments[1]:18;try{if(typeof value==='string'){// If it's already a string, try to parse it using ethers\nconst bigIntValue=ethers.parseUnits(value,0);// Parse as whole number\nreturn ethers.formatUnits(bigIntValue,decimals);}else if(typeof value==='bigint'){return ethers.formatUnits(value,decimals);}else{return value.toString();}}catch(error){console.warn('Error formatting value:',value,error);return value.toString();}};// Get live price from Chainlink feed\nconst getLivePrice=async feedAddress=>{if(!provider||!isConnected||!ethers){console.log('Cannot fetch price:',{provider:!!provider,isConnected,ethers:!!ethers});return null;}try{// Validate and checksum the address\nlet validAddress;try{validAddress=ethers.getAddress(feedAddress);console.log(\"Original address: \".concat(feedAddress));console.log(\"Checksummed address: \".concat(validAddress));}catch(addressError){console.error('Invalid address format:',addressError);return null;}console.log(\"Fetching price for feed: \".concat(validAddress));const contract=new ethers.Contract(validAddress,chainlinkABI,provider);console.log('Contract created, fetching latestRoundData...');const roundData=await contract.latestRoundData();console.log('Round data received:',roundData);console.log('Fetching decimals...');const decimals=await contract.decimals();console.log('Decimals:',decimals);// Convert both answer and decimals to numbers - handle BigInt values\nconst answerNumber=safeNumberConversion(roundData.answer);const decimalsNumber=safeNumberConversion(decimals);if(answerNumber===null){console.error('Could not convert answer to number:',roundData.answer);return null;}if(decimalsNumber===null){console.error('Could not convert decimals to number:',decimals);return null;}const price=answerNumber/Math.pow(10,decimalsNumber);console.log(\"Converted answer: \".concat(answerNumber,\", decimals: \").concat(decimalsNumber,\", calculated price: \").concat(price));return price;}catch(error){console.error('Error fetching price from feed:',error);console.error('Error details:',{message:error.message,code:error.code,data:error.data});return null;}};// Refresh all feed prices\nconst refreshPrices=useCallback(async()=>{if(!isConnected||!ethers){console.error('Cannot refresh prices: not connected or ethers not available');return;}if(isFetching){console.log('Price fetch already in progress, skipping...');return;}setIsFetching(true);setLoading(true);try{console.log(\"Starting price fetch for \".concat(feeds.length,\" feeds...\"));const updatedFeeds=await Promise.all(feeds.map(async feed=>{try{console.log(\"Fetching price for \".concat(feed.name,\" (\").concat(feed.address,\")\"));const price=await getLivePrice(feed.address);console.log(\"Got price for \".concat(feed.name,\":\"),price);return _objectSpread(_objectSpread({},feed),{},{currentPrice:price});}catch(feedError){console.error(\"Error fetching price for \".concat(feed.name,\":\"),feedError);return _objectSpread(_objectSpread({},feed),{},{currentPrice:null});}}));console.log('All price fetches completed, updating feeds...');setFeeds(updatedFeeds);}catch(error){console.error('Error refreshing prices:',error);}finally{setLoading(false);setIsFetching(false);}},[feeds,isConnected,ethers,isFetching]);// Toggle feed selection\nconst toggleFeedSelection=feed=>{console.log('Toggling feed selection:',{feed,weight:feed.weight,weightType:typeof feed.weight});setSelectedFeeds(prev=>{const isSelected=prev.some(f=>f.address===feed.address);if(isSelected){return prev.filter(f=>f.address!==feed.address);}else{// Ensure the feed object has all necessary properties\nconst feedWithWeight=_objectSpread(_objectSpread({},feed),{},{weight:feed.weight||1/(prev.length+1)// Fallback weight if not set\n});console.log('Adding feed with weight:',feedWithWeight);return[...prev,feedWithWeight];}});};// Filter feeds based on search and category\nconst filteredFeeds=feeds.filter(feed=>{if(!feed||!feed.name||!feed.description)return false;const matchesSearch=feed.name.toLowerCase().includes(searchTerm.toLowerCase())||feed.description.toLowerCase().includes(searchTerm.toLowerCase());const matchesCategory=filterCategory==='all'||feed.category===filterCategory;return matchesSearch&&matchesCategory;});// Get category display name\nconst getCategoryDisplayName=category=>{const categories={'crypto':'Cryptocurrencies','stablecoin':'Stablecoins','forex':'Forex','commodities':'Commodities'};return categories[category]||category;};// Check what feeds are registered in your FeedAggregator contract\nconst getRegisteredFeeds=async()=>{if(!provider||!isConnected){console.log('Cannot check registered feeds: not connected');return null;}try{console.log('Checking registered feeds in FeedAggregator contract...');const contract=new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator,feedAggregatorABI,provider);// Try to get the owner to verify contract is accessible\nconst owner=await contract.owner();console.log('Contract owner:',owner);// Use the symbol format that matches your contract mappings\nconst testSymbols=['ETH','BTC','LINK'];console.log('Testing with symbol format:',testSymbols);return{owner,testSymbols};}catch(error){console.error('Error checking registered feeds:',error);return null;}};// Get prices from your deployed FeedAggregator contract\nconst getContractPrices=async symbols=>{if(!provider||!isConnected){console.log('Cannot fetch contract prices: not connected');return null;}try{console.log('Fetching prices from FeedAggregator contract for symbols:',symbols);console.log('Symbols type:',typeof symbols,'Length:',symbols.length);console.log('Symbols content:',JSON.stringify(symbols));const contract=new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator,feedAggregatorABI,provider);const result=await contract.getPrices(symbols);console.log('Contract prices result:',result);console.log('Result type:',typeof result);console.log('Result keys:',Object.keys(result));console.log('Prices type:',typeof result.prices);console.log('Decimals type:',typeof result.decimals);console.log('UpdatedAts type:',typeof result.updatedAts);// Convert BigInt values to strings to avoid mixing types\nreturn{prices:result.prices.map(p=>p.toString()),decimals:result.decimals.map(d=>d.toString()),updatedAts:result.updatedAts.map(t=>t.toString())};}catch(error){console.error('Error fetching contract prices:',error);console.error('Error details:',{message:error.message,code:error.code,data:error.data,reason:error.reason});// Try to decode the revert reason if available\nif(error.data&&error.data!=='0x'){try{const iface=new ethers.Interface(feedAggregatorABI);const decodedError=iface.parseError(error.data);console.error('Decoded FeedAggregator error:',decodedError);// Show user-friendly error message\nif(decodedError&&decodedError.name==='UnknownFeed'){console.error('This means the feed mapping for one or more symbols is not set up in your FeedAggregator contract');console.error('You need to run the SetupFeedMappings script to add the feed mappings');}}catch(decodeError){console.error('Could not decode error data:',decodeError);}}return null;}};// Create a prediction market for the selected ETF basket (ONLINE CONTRACT VERSION)\nconst createPredictionMarket=async function(symbols,weights){let bandBps=arguments.length>2&&arguments[2]!==undefined?arguments[2]:500;let settleDays=arguments.length>3&&arguments[3]!==undefined?arguments[3]:7;console.log('=== createPredictionMarket FUNCTION STARTED (ONLINE MODE) ===');console.log('Parameters received:',{symbols,weights,bandBps,settleDays});try{console.log('Creating prediction market with:',{symbols,weights,bandBps,settleDays});// Input validation\nif(!Array.isArray(symbols)||symbols.length===0){throw new Error(\"Invalid symbols: \".concat(JSON.stringify(symbols),\". Must be a non-empty array.\"));}if(!Array.isArray(weights)||weights.length===0){throw new Error(\"Invalid weights: \".concat(JSON.stringify(weights),\". Must be a non-empty array.\"));}if(symbols.length!==weights.length){throw new Error(\"Mismatch: symbols length (\".concat(symbols.length,\") != weights length (\").concat(weights.length,\")\"));}// Debug: Log the exact data being processed\nconsole.log('createPredictionMarket input validation passed:');console.log('- Symbols:',symbols);console.log('- Weights:',weights);console.log('- Symbols types:',symbols.map(s=>typeof s));console.log('- Weights types:',weights.map(w=>typeof w));console.log('- Weights values:',weights.map(w=>w));// Calculate settlement timestamp (current time + settleDays)\nconst settleTs=Math.floor(Date.now()/1000)+settleDays*24*60*60;// Check if we have the required contracts and wallet connection\nif(!provider||!isConnected||!signer){throw new Error('Wallet not connected or provider not available');}if(CONTRACT_ADDRESSES.predictionMarketFactory==='0x0000000000000000000000000000000000000000'){throw new Error('PredictionMarketFactory address not set');}// Convert weights to 1e18 format for contract call\nconst weights1e18=weights.map(w=>ethers.parseUnits(w.toString(),18));console.log('Contract call parameters:',{symbols,weights1e18:weights1e18.map(w=>w.toString()),bandBps,settleTs});// Create contract instances\nconst factory=new ethers.Contract(CONTRACT_ADDRESSES.predictionMarketFactory,predictionMarketFactoryABI,signer);// Call the factory to create the market\nconsole.log('Calling EtfPredictionMarketFactory.create...');const tx=await factory.create(symbols,weights1e18,bandBps,settleTs);console.log('Transaction sent:',tx.hash);// Wait for transaction confirmation\nconsole.log('Waiting for transaction confirmation...');const receipt=await tx.wait();console.log('Transaction confirmed:',receipt.hash);// Parse the MarketCreated event\nconst event=receipt.logs.find(log=>{try{const parsed=factory.interface.parseLog(log);return parsed.name==='MarketCreated';}catch(_unused){return false;}});if(!event){throw new Error('MarketCreated event not found in transaction receipt');}const parsedEvent=factory.interface.parseLog(event);const{market,vault,withinId,outsideId,strike,lower,upper}=parsedEvent.args;console.log('Market created successfully:',{market:market.toString(),vault:vault.toString(),withinId:withinId.toString(),outsideId:outsideId.toString(),strike:strike.toString(),lower:lower.toString(),upper:upper.toString()});// Return the real market data\nreturn{market:market.toString(),vault:vault.toString(),withinId:withinId.toString(),outsideId:outsideId.toString(),strike:strike.toString(),lower:lower.toString(),upper:upper.toString(),bandBps:bandBps,settleTs:settleTs};}catch(error){console.error('=== ERROR IN createPredictionMarket ===');console.error('Error message:',error.message);console.error('Error stack:',error.stack);console.error('Error type:',error.constructor.name);console.error('Full error object:',error);return null;}};// Calculate ETF basket price using your deployed BasketPricer contract\nconst calculateContractBasketPrice=async(symbols,weights)=>{if(!provider||!isConnected){console.log('Cannot calculate contract basket price: not connected');return null;}try{console.log('Calculating basket price using BasketPricer contract');console.log('Symbols:',symbols);console.log('Weights (1e18):',weights);console.log('Symbols type:',typeof symbols,'Length:',symbols.length);console.log('Weights type:',typeof weights,'Length:',weights.length);const contract=new ethers.Contract(CONTRACT_ADDRESSES.basketPricer,basketPricerABI,provider);// Convert weights to 1e18 format (using ethers.parseUnits for compatibility)\nconst weights1e18=weights.map(w=>ethers.parseUnits(w.toString(),18));console.log('Converted weights1e18:',weights1e18);console.log('Weights1e18 type:',typeof weights1e18,'Length:',weights1e18.length);// Validate inputs before calling contract\nif(symbols.length===0){throw new Error('Symbols array is empty');}if(weights1e18.length===0){throw new Error('Weights array is empty');}if(symbols.length!==weights1e18.length){throw new Error(\"Symbols length (\".concat(symbols.length,\") != weights length (\").concat(weights1e18.length,\")\"));}console.log('Calling contract.quoteAndBounds with:',{symbols,weights1e18:weights1e18.map(w=>w.toString()),bandBps:500});const result=await contract.quoteAndBounds(symbols,weights1e18,500);// 5% band\nconsole.log('Contract basket calculation result:',result);return{etfPrice:result.etfPrice,lower:result.lower,upper:result.upper};}catch(error){console.error('Error calculating contract basket price:',error);console.error('Error details:',{message:error.message,code:error.code,data:error.data,reason:error.reason});// Try to decode the revert reason if available\nif(error.data&&error.data!=='0x'){try{const iface=new ethers.Interface(basketPricerABI);const decodedError=iface.parseError(error.data);console.error('Decoded BasketPricer error:',decodedError);}catch(decodeError){console.error('Could not decode BasketPricer error data:',decodeError);}}// Also try to decode using FeedAggregator ABI since the error might come from there\nif(error.data&&error.data!=='0x'){try{const iface=new ethers.Interface(feedAggregatorABI);const decodedError=iface.parseError(error.data);console.error('Decoded FeedAggregator error:',decodedError);}catch(decodeError){console.error('Could not decode FeedAggregator error data:',decodeError);}}return null;}};// Calculate ETF basket price using selected feeds and weights (Frontend calculation)\nconst calculateBasketPrice=useCallback(()=>{console.log('calculateBasketPrice called with selectedFeeds:',selectedFeeds);if(selectedFeeds.length===0){console.log('No selected feeds, returning null');setBasketPrice(null);setBasketCalculation(null);return null;}let totalWeight=0;let weightedPrice=0;const calculations=[];// Filter feeds that have valid prices\nconst validFeeds=selectedFeeds.filter(feed=>feed.currentPrice!==undefined&&feed.currentPrice!==null&&!isNaN(feed.currentPrice)&&feed.currentPrice>0&&typeof feed.currentPrice==='number');console.log('Valid feeds with prices:',validFeeds.length,'out of',selectedFeeds.length);if(validFeeds.length===0){console.log('No valid feeds with prices, returning null');setBasketPrice(null);setBasketCalculation(null);return null;}validFeeds.forEach(feed=>{const weight=Number(feed.weight)||1/validFeeds.length;// Ensure weight is a number\nconst price=Number(feed.currentPrice);// Ensure it's a number\nconsole.log(\"Processing feed \".concat(feed.name,\":\"),{weight,price,currentPrice:feed.currentPrice});// Additional safety check for BigInt or other non-number types\nif(typeof price!=='number'||isNaN(price)){console.warn(\"Skipping feed \".concat(feed.name,\" with invalid price:\"),feed.currentPrice);return;}if(typeof weight!=='number'||isNaN(weight)){console.warn(\"Skipping feed \".concat(feed.name,\" with invalid weight:\"),feed.weight);return;}const contribution=price*weight;calculations.push({symbol:feed.name.split('/')[0],price:price,weight:weight,contribution:contribution,decimals:feed.decimals});weightedPrice+=contribution;totalWeight+=weight;});if(totalWeight>0&&calculations.length>0){const basketPrice=weightedPrice/totalWeight;console.log('Basket calculation successful:',{validFeeds:validFeeds.length,totalWeight,weightedPrice,basketPrice,calculations});setBasketPrice(basketPrice);setBasketCalculation(calculations);return basketPrice;// Return the calculated price\n}else{console.log('Basket calculation failed - no valid calculations');setBasketPrice(null);setBasketCalculation(null);return null;}},[selectedFeeds]);// Calculate price bands for prediction markets\nconst calculatePriceBands=function(price){let bandBps=arguments.length>1&&arguments[1]!==undefined?arguments[1]:500;// Default 5% band\nif(!price)return null;const band=bandBps/10000;// Convert basis points to decimal\nconst lower=price*(1-band);const upper=price*(1+band);return{lower,upper,bandBps};};// Auto-fetch prices when feeds are loaded and wallet is connected\nuseEffect(()=>{if(feeds.length>0&&isConnected&&provider&&!loading&&!isFetching){console.log('Auto-fetching prices for feeds:',feeds.length);console.log('Provider available:',!!provider);console.log('Wallet connected:',isConnected);console.log('Current loading state:',loading);console.log('Current fetching state:',isFetching);refreshPrices();}else{console.log('Auto-fetch conditions not met:',{feedsLength:feeds.length,isConnected,hasProvider:!!provider,isLoading:loading,isFetching:isFetching});}},[feeds,isConnected,provider,refreshPrices,loading,isFetching]);// Auto-calculate basket price when selected feeds or prices change\nuseEffect(()=>{if(selectedFeeds.length>0){// Check if we have prices for all selected feeds\nconst feedsWithPrices=selectedFeeds.filter(feed=>feed.currentPrice!==undefined&&feed.currentPrice!==null);if(feedsWithPrices.length===selectedFeeds.length){calculateBasketPrice();}}},[selectedFeeds,calculateBasketPrice]);// Error boundary for the component\nif(!ethers){return/*#__PURE__*/_jsx(\"div\",{className:\"chainlink-feeds\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u26A0\\uFE0F Error Loading Chainlink Feeds\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ethers library is not available. Please check your dependencies.\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"chainlink-feeds\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feeds-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDD17 Chainlink Price Feeds\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Select and monitor real-time price feeds from Chainlink oracles\"})]}),currentNetwork&&/*#__PURE__*/_jsxs(\"div\",{className:\"network-info-banner\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"network-badge\",children:[\"\\uD83C\\uDF10 \",currentNetwork.name]}),/*#__PURE__*/_jsxs(\"span\",{className:\"chain-id-badge\",children:[\"Chain ID: \",currentNetwork.chainId]}),!isConnected&&/*#__PURE__*/_jsx(\"span\",{className:\"warning-badge\",children:\"\\u26A0\\uFE0F Connect wallet to view live prices\"}),isConnected&&/*#__PURE__*/_jsx(\"span\",{className:\"status-badge\",children:\"\\u2705 Wallet Connected\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feeds-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-filter\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search feeds...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsxs(\"select\",{value:filterCategory,onChange:e=>setFilterCategory(e.target.value),className:\"category-filter\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Categories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"crypto\",children:\"Cryptocurrencies\"}),/*#__PURE__*/_jsx(\"option\",{value:\"stablecoin\",children:\"Stablecoins\"}),/*#__PURE__*/_jsx(\"option\",{value:\"forex\",children:\"Forex\"}),/*#__PURE__*/_jsx(\"option\",{value:\"commodities\",children:\"Commodities\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"refresh-section\",children:!isConnected?/*#__PURE__*/_jsx(\"div\",{className:\"connect-prompt\",children:/*#__PURE__*/_jsx(\"span\",{className:\"warning-text\",children:\"\\u26A0\\uFE0F Connect your wallet to view live prices\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:refreshPrices,disabled:loading,className:\"refresh-button primary\",children:loading?'🔄 Refreshing...':'🔄 Refresh Prices'}),/*#__PURE__*/_jsx(\"div\",{className:\"refresh-status\",children:loading?/*#__PURE__*/_jsxs(\"span\",{className:\"loading-indicator\",children:[\"\\u23F3 Fetching prices for \",feeds.length,\" feeds...\"]}):/*#__PURE__*/_jsxs(\"span\",{className:\"status-indicator\",children:[feeds.filter(f=>f.currentPrice!==undefined&&f.currentPrice!==null).length,\" of \",feeds.length,\" feeds have prices\"]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"debug-panel\",children:/*#__PURE__*/_jsxs(\"details\",{children:[/*#__PURE__*/_jsx(\"summary\",{children:\"\\uD83D\\uDC1B Debug Info\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"debug-content\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Provider:\"}),\" \",provider?'Available':'Not Available']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Signer:\"}),\" \",signer?'Available':'Not Available']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Connected:\"}),\" \",isConnected?'Yes':'No']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Account:\"}),\" \",account||'None']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Network:\"}),\" \",currentNetwork?\"\".concat(currentNetwork.name,\" (\").concat(currentNetwork.chainId,\")\"):'None']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Feeds Count:\"}),\" \",feeds.length]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Selected Feeds:\"}),\" \",selectedFeeds.length]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ethers Version:\"}),\" \",ethers?ethers.version||'Unknown':'Not Available']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Loading State:\"}),\" \",loading?'Yes':'No']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Fetching State:\"}),\" \",isFetching?'Yes':'No']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Available Feeds for Network:\"}),\" \",currentNetwork?((_availableFeeds$curre=availableFeeds[currentNetwork.chainId])===null||_availableFeeds$curre===void 0?void 0:_availableFeeds$curre.length)||0:0]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"contract-panel\",children:/*#__PURE__*/_jsxs(\"details\",{children:[/*#__PURE__*/_jsx(\"summary\",{children:\"\\uD83D\\uDCCB Contract Integration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"contract-content\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"BasketPricer:\"}),\" \",CONTRACT_ADDRESSES.basketPricer]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"FeedAggregator:\"}),\" \",CONTRACT_ADDRESSES.feedAggregator]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Network:\"}),\" \",currentNetwork?currentNetwork.name:'Unknown']}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Integration Status:\"}),\" \",isConnected?'🟢 Ready':'🔴 Connect Wallet']})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"feeds-grid\",children:filteredFeeds.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"no-feeds\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No feeds available for the current network\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Switch to a supported testnet (Goerli, Sepolia, or Mumbai)\"}),ethers&&/*#__PURE__*/_jsxs(\"div\",{className:\"address-validation-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" Some feeds may have been filtered out due to invalid addresses.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Check the console for specific address validation errors.\"})]})]}):filteredFeeds.map((feed,index)=>{if(!feed||!feed.address||!feed.name)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"feed-card \".concat(selectedFeeds.some(f=>f.address===feed.address)?'selected':''),onClick:()=>toggleFeedSelection(feed),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"feed-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:feed.name||'Unknown Feed'}),/*#__PURE__*/_jsx(\"span\",{className:\"category-tag\",children:getCategoryDisplayName(feed.category||'unknown')})]}),/*#__PURE__*/_jsx(\"p\",{className:\"feed-description\",children:feed.description||'No description available'}),/*#__PURE__*/_jsxs(\"div\",{className:\"feed-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Address:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value address\",children:feed.address?\"\".concat(feed.address.slice(0,6),\"...\").concat(feed.address.slice(-4)):'Invalid Address'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Decimals:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:feed.decimals||8})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Weight:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value weight\",children:[((feed.weight||1/(feeds.length||1))*100).toFixed(1),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Current Price:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value price\",children:feed.currentPrice!==undefined&&feed.currentPrice!==null&&!isNaN(feed.currentPrice)&&typeof feed.currentPrice==='number'?\"$\".concat(feed.currentPrice.toFixed(4)):isConnected?/*#__PURE__*/_jsxs(\"span\",{className:\"loading-status\",children:[loading?'⏳ Fetching...':'Loading...',/*#__PURE__*/_jsx(\"button\",{className:\"retry-button\",onClick:e=>{e.stopPropagation();getLivePrice(feed.address).then(price=>{const updatedFeeds=feeds.map(f=>f.address===feed.address?_objectSpread(_objectSpread({},f),{},{currentPrice:price}):f);setFeeds(updatedFeeds);});},children:\"\\uD83D\\uDD04 Retry\"})]}):'Connect wallet'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"feed-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"select-button\",onClick:e=>{e.stopPropagation();toggleFeedSelection(feed);},children:selectedFeeds.some(f=>f.address===feed.address)?'✓ Selected':'Select'}),/*#__PURE__*/_jsx(\"button\",{className:\"copy-address-button\",onClick:e=>{e.stopPropagation();navigator.clipboard.writeText(feed.address);alert('Address copied to clipboard!');},children:\"\\uD83D\\uDCCB Copy\"})]})]},\"\".concat(feed.address,\"-\").concat(index));})}),selectedFeeds.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"selected-feeds-summary\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Selected Feeds (\",selectedFeeds.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"selected-feeds-list\",children:selectedFeeds.map((feed,index)=>{if(!feed||!feed.address)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"selected-feed-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"feed-name\",children:feed.name||'Unknown Feed'}),/*#__PURE__*/_jsx(\"span\",{className:\"feed-price\",children:feed.currentPrice!==undefined&&feed.currentPrice!==null&&!isNaN(feed.currentPrice)&&typeof feed.currentPrice==='number'?\"$\".concat(feed.currentPrice.toFixed(4)):'N/A'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleFeedSelection(feed),className:\"remove-button\",children:\"\\u2715\"})]},\"selected-\".concat(feed.address,\"-\").concat(index));})}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"export-button\",onClick:()=>{const feedData=selectedFeeds.map(f=>({name:f.name,address:f.address,description:f.description,decimals:f.decimals,category:f.category}));const blob=new Blob([JSON.stringify(feedData,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='selected-chainlink-feeds.json';a.click();URL.revokeObjectURL(url);},children:\"\\uD83D\\uDCE5 Export Selected Feeds\"}),/*#__PURE__*/_jsx(\"button\",{className:\"clear-button\",onClick:()=>setSelectedFeeds([]),children:\"\\uD83D\\uDDD1\\uFE0F Clear All\"}),/*#__PURE__*/_jsx(\"button\",{className:\"check-feeds-button\",onClick:async()=>{try{const registeredFeeds=await getRegisteredFeeds();if(registeredFeeds){alert(\"Contract Status:\\n\\nOwner: \".concat(registeredFeeds.owner,\"\\nTest Symbols: \").concat(registeredFeeds.testSymbols.join(', '),\"\\n\\nNote: These are test symbols. Your contract may not have these feeds registered yet.\"));}else{alert('Could not check contract status. Check console for details.');}}catch(error){console.error('Check feeds failed:',error);alert(\"Check feeds failed: \".concat(error.message));}},children:\"\\uD83D\\uDD0D Check Contract Status\"}),/*#__PURE__*/_jsx(\"button\",{className:\"test-weights-button\",onClick:()=>{if(selectedFeeds.length===0){alert('Please select some feeds first');return;}const symbols=selectedFeeds.map(f=>f.name);let weights=selectedFeeds.map(f=>f.weight||1/selectedFeeds.length);// Normalize weights to sum to 1\nconst totalWeight=weights.reduce((sum,w)=>sum+w,0);weights=weights.map(w=>w/totalWeight);console.log('Weight test:',{selectedFeeds:selectedFeeds.map(f=>({name:f.name,weight:f.weight})),symbols,weights,totalWeight:weights.reduce((sum,w)=>sum+w,0)});// Test weight conversion\ntry{const weights1e18=weights.map(w=>ethers.parseUnits(w.toString(),18));console.log('Weight conversion test:',{original:weights,converted:weights1e18.map(w=>w.toString()),allValid:weights1e18.every(w=>w.gt(0))});alert('Weight test successful! Check console for details.');}catch(error){console.error('Weight conversion failed:',error);alert(\"Weight conversion failed: \".concat(error.message));}},children:\"\\uD83E\\uDDEA Test Weights\"}),/*#__PURE__*/_jsx(\"button\",{className:\"create-market-button\",onClick:async()=>{if(selectedFeeds.length===0){alert('Please select some feeds first to create a prediction market');return;}const symbols=selectedFeeds.map(f=>f.name);let weights=selectedFeeds.map(f=>{const weight=f.weight||1/selectedFeeds.length;console.log(\"Create Market - Feed \".concat(f.name,\": weight=\").concat(f.weight,\", fallback=\").concat(1/selectedFeeds.length,\", final=\").concat(weight));return weight;});// Validate inputs before creating market\nif(symbols.length===0){alert('No symbols selected. Please select some feeds first.');return;}if(weights.some(w=>w===null||w===undefined||isNaN(w)||w<=0)){alert('Invalid weights detected. All weights must be positive numbers.');return;}// Normalize weights to sum to 1\nconst totalWeight=weights.reduce((sum,w)=>sum+w,0);weights=weights.map(w=>w/totalWeight);console.log('Creating prediction market for:',{symbols,weights});console.log('Weight validation:',weights.map((w,i)=>({index:i,weight:w,valid:w>0&&!isNaN(w)})));console.log('Normalized weights sum:',weights.reduce((sum,w)=>sum+w,0));// Debug: Check the exact data being passed\nconsole.log('DEBUG - Symbols array:',symbols);console.log('DEBUG - Symbols type:',typeof symbols,'Length:',symbols.length);console.log('DEBUG - Weights array:',weights);console.log('DEBUG - Weights type:',typeof weights,'Length:',weights.length);console.log('DEBUG - Selected feeds:',selectedFeeds);try{// Test if function exists\nif(typeof createPredictionMarket!=='function'){throw new Error(\"createPredictionMarket is not a function! Type: \".concat(typeof createPredictionMarket));}console.log('Function exists, calling createPredictionMarket...');console.log('About to call with:',{symbols,weights,bandBps:500,settleDays:7});// Test the function call step by step\nlet result;try{console.log('Step 1: Function call starting...');result=await createPredictionMarket(symbols,weights,500,7);// 5% band, 7 days\nconsole.log('Step 2: Function call completed, result:',result);}catch(callError){console.error('Step 2: Function call failed:',callError);throw callError;}if(result){alert(\"\\uD83C\\uDFAF Prediction Market Created! (OFFLINE MODE)\\n\\nMarket: \".concat(result.market,\"\\nVault: \").concat(result.vault,\"\\nWithin ID: \").concat(result.withinId,\"\\nOutside ID: \").concat(result.outsideId,\"\\nStrike: \").concat(ethers.formatUnits(result.strike,18),\"\\nLower: \").concat(ethers.formatUnits(result.lower,18),\"\\nUpper: \").concat(ethers.formatUnits(result.upper,18),\"\\nBand: \").concat(result.bandBps/100,\"%\\nSettle: \").concat(new Date(result.settleTs*1000).toLocaleString(),\"\\n\\nNote: This is a mock market for testing. No actual blockchain transaction occurred.\"));// Store the created market for later use\nconst newMarket={id:Date.now(),market:result.market,vault:result.vault,symbols,weights,strike:result.strike.toString(),// Convert BigInt to string\nlower:result.lower.toString(),// Convert BigInt to string\nupper:result.upper.toString(),// Convert BigInt to string\nbandBps:result.bandBps,settleTs:result.settleTs,createdAt:Date.now(),isMock:true// Mark as mock market\n};// Store in localStorage for the CLOB page\nlocalStorage.setItem('createdMarkets',JSON.stringify([...JSON.parse(localStorage.getItem('createdMarkets')||'[]'),newMarket]));console.log('Mock market created and stored:',newMarket);}else{alert('Failed to create prediction market. Check console for details.');}}catch(error){console.error('=== BUTTON CLICK ERROR ===');console.error('Error message:',error.message);console.error('Error stack:',error.stack);console.error('Error type:',error.constructor.name);console.error('Full error object:',error);alert(\"Create market failed: \".concat(error.message,\"\\n\\nCheck console for detailed error information.\"));}},children:\"\\uD83C\\uDFAF Create Prediction Market (OFFLINE)\"}),/*#__PURE__*/_jsx(\"button\",{className:\"contract-test-button\",onClick:()=>{console.log('=== FUNCTION ACCESSIBILITY TEST ===');console.log('createPredictionMarket:',typeof createPredictionMarket);console.log('calculateContractBasketPrice:',typeof calculateContractBasketPrice);console.log('getRegisteredFeeds:',typeof getRegisteredFeeds);console.log('toggleFeedSelection:',typeof toggleFeedSelection);alert('Check console for function accessibility test results');},children:\"\\uD83D\\uDD0D Test Function Access\"}),/*#__PURE__*/_jsx(\"button\",{className:\"contract-test-button\",onClick:async()=>{try{// First, check what feeds are registered in your contract\nconsole.log('Checking registered feeds...');const registeredFeeds=await getRegisteredFeeds();console.log('Registered feeds info:',registeredFeeds);if(!registeredFeeds){alert('Could not check registered feeds. Check console for details.');return;}// Use selected feeds if available, otherwise fall back to test symbols\nlet symbols,weights;if(selectedFeeds.length>0){symbols=selectedFeeds.map(f=>f.name);// Use symbol names like \"ETH\"\nweights=selectedFeeds.map(f=>f.weight||1/selectedFeeds.length);console.log('Using selected feeds with symbols:',symbols);}else{// Use the symbols that are actually in your FeedAggregator contract\nsymbols=['ETH','BTC','LINK'];weights=[0.4,0.4,0.2];// Match the weights defined above\nconsole.log('Using fallback test symbols from your contract:',symbols);}console.log('Final symbols:',symbols);console.log('Final weights:',weights);console.log('Testing contract integration with:',{symbols,weights});// First, test if contracts are accessible\nconsole.log('Testing contract accessibility...');const basketContract=new ethers.Contract(CONTRACT_ADDRESSES.basketPricer,basketPricerABI,provider);const aggregatorContract=new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator,feedAggregatorABI,provider);console.log('Contracts created successfully');// Test FeedAggregator\nconsole.log('Testing FeedAggregator...');const contractPrices=await getContractPrices(symbols);console.log('FeedAggregator prices:',contractPrices);// Test BasketPricer\nconsole.log('Testing BasketPricer...');const contractBasket=await calculateContractBasketPrice(symbols,weights);console.log('BasketPricer result:',contractBasket);if(contractBasket){// Convert ethers BigNumber to readable format\nconst etfPrice=ethers.formatUnits(contractBasket.etfPrice,18);const lowerBand=ethers.formatUnits(contractBasket.lower,18);const upperBand=ethers.formatUnits(contractBasket.upper,18);alert(\"Contract Integration Test:\\n\\nSymbols Tested: \".concat(symbols.join(', '),\"\\nFeedAggregator: \").concat(contractPrices?'✅ Working':'❌ Failed',\"\\nBasketPricer: \\u2705 Working\\n\\nETF Price: \").concat(etfPrice,\"\\nLower Band: \").concat(lowerBand,\"\\nUpper Band: \").concat(upperBand));}else{alert('Contract integration test failed. Check console for details.');}}catch(error){console.error('Contract test failed:',error);alert(\"Contract test failed: \".concat(error.message,\"\\n\\nCheck console for detailed error information.\"));}},children:\"\\uD83E\\uDDEA Test Contracts\"}),/*#__PURE__*/_jsx(\"button\",{className:\"test-button\",onClick:async()=>{if(!provider||!isConnected){alert('Please connect your wallet first');return;}try{console.log('Testing FeedAggregator only...');// Test just the FeedAggregator with a single symbol\nconst symbols=['ETH'];console.log('Testing with single symbol:',symbols);console.log('Symbols array:',symbols);console.log('Symbols type:',typeof symbols);console.log('Symbols length:',symbols.length);console.log('First symbol:',symbols[0]);console.log('First symbol type:',typeof symbols[0]);const contractPrices=await getContractPrices(symbols);console.log('FeedAggregator single symbol test result:',contractPrices);if(contractPrices){// Convert string values back to numbers for formatting\nconst price=ethers.formatUnits(contractPrices.prices[0],parseInt(contractPrices.decimals[0]));const updatedAt=new Date(parseInt(contractPrices.updatedAts[0])*1000).toLocaleString();alert(\"FeedAggregator Test:\\n\\nSymbol: \".concat(symbols[0],\"\\nPrice: \").concat(price,\"\\nDecimals: \").concat(contractPrices.decimals[0],\"\\nUpdated: \").concat(updatedAt));}else{alert('FeedAggregator test failed. Check console for details.');}}catch(error){console.error('FeedAggregator test failed:',error);console.error('Full error object:',error);console.error('Error message:',error.message);console.error('Error code:',error.code);console.error('Error data:',error.data);console.error('Error reason:',error.reason);alert(\"FeedAggregator test failed: \".concat(error.message,\"\\n\\nCheck console for detailed error information.\"));}},children:\"\\uD83D\\uDD0D Test FeedAggregator Only\"}),/*#__PURE__*/_jsx(\"button\",{className:\"test-button\",onClick:async()=>{if(!provider||!isConnected){alert('Please connect your wallet first');return;}try{console.log('Checking registered feeds in FeedAggregator...');console.log('Contract address:',CONTRACT_ADDRESSES.feedAggregator);console.log('Provider network:',await provider.getNetwork());// Test if we can call the contract at all\nconst contract=new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator,feedAggregatorABI,provider);console.log('Contract instance created');// Try to get the owner to see if contract is accessible\nconsole.log('Attempting to call contract.owner()...');const owner=await contract.owner();console.log('FeedAggregator owner:',owner);// Test with a symbol that's definitely not registered\nconst testSymbols=['NOT_REGISTERED'];console.log('Testing with intentionally invalid symbol:',testSymbols);try{const result=await contract.getPrices(testSymbols);console.log('Unexpected success with unregistered symbol:',result);}catch(error){console.log('Expected error with unregistered symbol:',error.message);console.log('Full error object:',error);console.log('Error data:',error.data);// Try to decode the error\nif(error.data&&error.data!=='0x'){try{const iface=new ethers.Interface(feedAggregatorABI);const decodedError=iface.parseError(error.data);console.log('Decoded error:',decodedError);if(decodedError&&decodedError.name==='UnknownFeed'){alert(\"FeedAggregator is working but has no feed mappings set up.\\n\\nYou need to run the SetupFeedMappings script to add the feed mappings for ETH, BTC, and LINK.\\n\\nError: \".concat(decodedError.args[0]));}}catch(decodeError){console.error('Could not decode error:',decodeError);}}}}catch(error){console.error('FeedAggregator check failed:',error);console.error('Full error details:',{message:error.message,code:error.code,data:error.data,reason:error.reason});alert(\"FeedAggregator check failed: \".concat(error.message,\"\\n\\nCheck console for detailed error information.\"));}},children:\"\\uD83D\\uDCCB Check Feed Status\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"created-markets-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDFAF Created Prediction Markets\"}),/*#__PURE__*/_jsx(\"button\",{className:\"view-clob-button\",onClick:()=>{// Navigate to CLOB trading page\nwindow.location.href='/trading';},children:\"\\uD83D\\uDCCA Go to CLOB Trading\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"markets-list\",children:(()=>{const createdMarkets=JSON.parse(localStorage.getItem('createdMarkets')||'[]');if(createdMarkets.length===0){return/*#__PURE__*/_jsxs(\"div\",{className:\"no-markets\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No prediction markets created yet.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Select feeds above and click \\\"\\uD83C\\uDFAF Create Prediction Market (OFFLINE)\\\" to create a mock prediction market for testing. No blockchain transaction will occur.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"warning-text\",children:\"\\u26A0\\uFE0F This is currently in offline mode for testing. Markets created are stored locally and can be used to test the CLOB trading interface.\"})]});}return createdMarkets.map((market,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"market-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"market-header\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Market #\",index+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"market-status\",children:new Date(market.settleTs*1000)>new Date()?'🟡 Active':'🔴 Settled'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"market-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Symbols:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:market.symbols.join(', ')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Strike Price:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"$\",safeFormatUnits(market.strike,18)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Price Band:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[\"$\",safeFormatUnits(market.lower,18),\" - $\",safeFormatUnits(market.upper,18)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Band Width:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value\",children:[market.bandBps/100,\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Settlement:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:new Date(market.settleTs*1000).toLocaleString()})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Market Address:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"value address\",children:[market.market.slice(0,6),\"...\",market.market.slice(-4)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"market-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"trade-button\",onClick:()=>{// Navigate to CLOB trading with this market\nlocalStorage.setItem('selectedMarket',JSON.stringify(market));window.location.href='/trading';},children:\"\\uD83D\\uDE80 Trade This Market\"})})]},market.id));})()})]}),selectedFeeds.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"basket-calculator\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"calculator-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCCA ETF Basket Calculator\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"calculator-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"refresh-basket-button\",onClick:calculateBasketPrice,disabled:selectedFeeds.length===0,children:\"\\uD83D\\uDD04 Refresh Basket\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"toggle-calculator-button\",onClick:()=>setShowBasketCalculator(!showBasketCalculator),children:[showBasketCalculator?'🔽 Hide':'🔼 Show',\" Calculator\"]})]})]}),showBasketCalculator&&/*#__PURE__*/_jsxs(\"div\",{className:\"calculator-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"basket-price-display\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-main\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"Basket NAV:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"value\",children:basketPrice?\"$\".concat(basketPrice.toFixed(4)):selectedFeeds.some(f=>f.currentPrice===undefined)?'Loading prices...':'No valid prices'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"debug-info\",children:/*#__PURE__*/_jsxs(\"small\",{children:[\"Selected feeds: \",selectedFeeds.length,\" | Feeds with prices: \",selectedFeeds.filter(f=>f.currentPrice!==undefined&&f.currentPrice!==null).length,\" | Status: \",basketPrice?'Calculated':'Waiting for prices']})}),basketPrice&&/*#__PURE__*/_jsxs(\"div\",{className:\"price-bands\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"band-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"band-label\",children:\"5% Band:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"band-range\",children:[\"$\",(_calculatePriceBands=calculatePriceBands(basketPrice,500))===null||_calculatePriceBands===void 0?void 0:_calculatePriceBands.lower.toFixed(4),\" - $\",(_calculatePriceBands2=calculatePriceBands(basketPrice,500))===null||_calculatePriceBands2===void 0?void 0:_calculatePriceBands2.upper.toFixed(4)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"band-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"band-label\",children:\"10% Band:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"band-range\",children:[\"$\",(_calculatePriceBands3=calculatePriceBands(basketPrice,1000))===null||_calculatePriceBands3===void 0?void 0:_calculatePriceBands3.lower.toFixed(4),\" - $\",(_calculatePriceBands4=calculatePriceBands(basketPrice,1000))===null||_calculatePriceBands4===void 0?void 0:_calculatePriceBands4.upper.toFixed(4)]})]})]})]}),basketCalculation&&/*#__PURE__*/_jsxs(\"div\",{className:\"basket-composition\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Basket Composition\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"composition-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"table-header\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Asset\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Weight\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Contribution\"})]}),basketCalculation.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"composition-row\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"asset-symbol\",children:item.symbol}),/*#__PURE__*/_jsxs(\"span\",{className:\"asset-price\",children:[\"$\",item.price.toFixed(4)]}),/*#__PURE__*/_jsxs(\"span\",{className:\"asset-weight\",children:[(item.weight*100).toFixed(1),\"%\"]}),/*#__PURE__*/_jsxs(\"span\",{className:\"asset-contribution\",children:[\"$\",item.contribution.toFixed(4)]})]},\"basket-\".concat(item.symbol,\"-\").concat(index)))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contract-integration\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83D\\uDD17 Smart Contract Integration\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"integration-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Use these parameters with your \",/*#__PURE__*/_jsx(\"code\",{children:\"EtfFeedAggregator\"}),\" and \",/*#__PURE__*/_jsx(\"code\",{children:\"BasketPricer\"}),\" contracts:\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"contract-params\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"param-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Symbols Array:\"}),/*#__PURE__*/_jsx(\"code\",{className:\"param-value\",children:JSON.stringify(selectedFeeds.map(f=>f.name.split('/')[0]))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"param-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Weights (1e18):\"}),/*#__PURE__*/_jsx(\"code\",{className:\"param-value\",children:JSON.stringify(selectedFeeds.map(f=>Math.floor((f.weight||1/selectedFeeds.length)*1e18)))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"param-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Feed Addresses:\"}),/*#__PURE__*/_jsx(\"code\",{className:\"param-value\",children:JSON.stringify(selectedFeeds.map(f=>f.address))})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"contract-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"copy-params-button\",onClick:()=>{const params={symbols:selectedFeeds.map(f=>f.name.split('/')[0]),weights:selectedFeeds.map(f=>Math.floor((f.weight||1/selectedFeeds.length)*1e18)),addresses:selectedFeeds.map(f=>f.address),basketPrice:basketPrice,timestamp:new Date().toISOString()};navigator.clipboard.writeText(JSON.stringify(params,null,2));alert('Contract parameters copied to clipboard!');},children:\"\\uD83D\\uDCCB Copy Contract Params\"})})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCA1 How to Use\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"1. Connect Wallet:\"}),\" Connect your Web3 wallet to view live prices\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"2. Select Feeds:\"}),\" Click on feeds to select them for your project\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"3. Copy Addresses:\"}),\" Use the copy button to get the contract address\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"4. Export Selection:\"}),\" Download your selected feeds as JSON\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"5. ETF Basket Calculator:\"}),\" Calculate weighted basket prices and price bands\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"6. Smart Contract Integration:\"}),\" Get ready-to-use parameters for your contracts\"]})]}),/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83C\\uDFD7\\uFE0F ETF Prediction Market Architecture\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"EtfFeedAggregator:\"}),\" Manages multiple Chainlink price feeds with staleness checks\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"BasketPricer:\"}),\" Calculates weighted basket prices and price bands for prediction markets\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"EtfPredictionMarket:\"}),\" Creates markets on whether ETF prices stay within specified bands\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"help-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"PredictionMarketVault:\"}),\" Manages collateral and payouts for prediction markets\"]})]})]})]});}export default ChainlinkFeeds;","map":{"version":3,"names":["React","useState","useEffect","useCallback","ethers","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ChainlinkFeeds","_ref","_availableFeeds$curre","_calculatePriceBands","_calculatePriceBands2","_calculatePriceBands3","_calculatePriceBands4","account","provider","signer","isConnected","currentNetwork","feeds","setFeeds","selectedFeeds","setSelectedFeeds","loading","setLoading","isFetching","setIsFetching","searchTerm","setSearchTerm","filterCategory","setFilterCategory","basketPrice","setBasketPrice","basketCalculation","setBasketCalculation","showBasketCalculator","setShowBasketCalculator","availableFeeds","address","name","description","decimals","category","weight","chainlinkABI","CONTRACT_ADDRESSES","basketPricer","feedAggregator","predictionMarketFactory","claimTokens","collateral","basketPricerABI","feedAggregatorABI","predictionMarketFactoryABI","predictionMarketABI","chainId","console","log","networkFeeds","validFeeds","filter","feed","checksummedAddress","getAddress","concat","error","forEach","weightType","addresses","map","f","uniqueAddresses","Set","length","size","uniqueFeeds","index","indexOf","safeNumberConversion","value","Number","parsed","parseFloat","isNaN","safeFormatUnits","arguments","undefined","bigIntValue","parseUnits","formatUnits","toString","warn","getLivePrice","feedAddress","validAddress","addressError","contract","Contract","roundData","latestRoundData","answerNumber","answer","decimalsNumber","price","Math","pow","message","code","data","refreshPrices","updatedFeeds","Promise","all","_objectSpread","currentPrice","feedError","toggleFeedSelection","prev","isSelected","some","feedWithWeight","filteredFeeds","matchesSearch","toLowerCase","includes","matchesCategory","getCategoryDisplayName","categories","getRegisteredFeeds","owner","testSymbols","getContractPrices","symbols","JSON","stringify","result","getPrices","Object","keys","prices","updatedAts","p","d","t","reason","iface","Interface","decodedError","parseError","decodeError","createPredictionMarket","weights","bandBps","settleDays","Array","isArray","Error","s","w","settleTs","floor","Date","now","weights1e18","factory","tx","create","hash","receipt","wait","event","logs","find","interface","parseLog","_unused","parsedEvent","market","vault","withinId","outsideId","strike","lower","upper","args","stack","constructor","calculateContractBasketPrice","quoteAndBounds","etfPrice","calculateBasketPrice","totalWeight","weightedPrice","calculations","contribution","push","symbol","split","calculatePriceBands","band","feedsLength","hasProvider","isLoading","feedsWithPrices","className","children","type","placeholder","onChange","e","target","onClick","disabled","version","slice","toFixed","stopPropagation","then","navigator","clipboard","writeText","alert","feedData","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","registeredFeeds","join","reduce","sum","original","converted","allValid","every","gt","i","valid","callError","toLocaleString","newMarket","id","createdAt","isMock","localStorage","setItem","parse","getItem","basketContract","aggregatorContract","contractPrices","contractBasket","lowerBand","upperBand","parseInt","updatedAt","getNetwork","window","location","createdMarkets","item","params","timestamp","toISOString"],"sources":["/Users/raymeind/mini-etf/frontend/src/ChainlinkFeeds.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { ethers } from 'ethers';\nimport './ChainlinkFeeds.css';\n\nfunction ChainlinkFeeds({ account, provider, signer, isConnected, currentNetwork }) {\n  const [feeds, setFeeds] = useState([]);\n  const [selectedFeeds, setSelectedFeeds] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [isFetching, setIsFetching] = useState(false); // Prevent multiple simultaneous fetches\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('all');\n  const [basketPrice, setBasketPrice] = useState(null);\n  const [basketCalculation, setBasketCalculation] = useState(null);\n  const [showBasketCalculator, setShowBasketCalculator] = useState(false);\n\n  // Common Chainlink price feeds for different networks - Optimized for ETF Basket Trading\n  const availableFeeds = {\n    '0x5': [ // Goerli\n      { address: '0xD4a33860578De61DBAbDc8BFdb98FD742fA7028e', name: 'ETH', description: 'Ethereum to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.40 },\n      { address: '0x779877A7B0D9E8603169DdbD7836e478b4624789', name: 'LINK', description: 'Chainlink to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.20 },\n      { address: '0xA39434A63A52E749F02807ae27335515BA9b2F6F', name: 'BTC', description: 'Bitcoin to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.40 }\n    ], \n    '0xaa36a7': [ // Sepolia\n      { address: '0x694AA1769357215DE4FAC081bf1f309aDC325306', name: 'ETH', description: 'Ethereum to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.40 },\n      { address: '0xc59E3633BAAC79493d08e8bD3f9731fD61B3C326', name: 'LINK', description: 'Chainlink to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.20 },\n      { address: '0x1b44F3514812d835EB1BDB2acE6093a1F3e060A9', name: 'BTC', description: 'Bitcoin to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.40 }\n    ],\n    '0x13881': [ // Mumbai\n      { address: '0x0715A7794a1dc8e42615F059dD6e406A6594651A', name: 'ETH', description: 'Ethereum to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.40 },\n      { address: '0x12162c3E810393dECEc62aA165f3Df2c08FbF4E8', name: 'LINK', description: 'Chainlink to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.20 },\n      { address: '0x007A22900a3B98143368Bd7874Bc93c557e4e408', name: 'BTC', description: 'Bitcoin to USD Price Feed', decimals: 8, category: 'crypto', weight: 0.40 }\n    ]\n  };\n\n  // Chainlink ABI for price feeds\n  const chainlinkABI = [\n    \"function latestRoundData() external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)\",\n    \"function decimals() external view returns (uint8)\",\n    \"function description() external view returns (string memory)\"\n  ];\n\n  // Your deployed contract addresses\n  const CONTRACT_ADDRESSES = {\n    basketPricer: '0x9be9Edb609F164088141642ac14437672FbA47b2',\n    feedAggregator: '0x947C3c632BDea7511aB8fDb419592993F80992dd',\n    predictionMarketFactory: '0x29d1eBDa71C3d2B62CA2b6F275B1658077bB09DD',\n    claimTokens: '0x31d1e2d63169cC9e9910DDe53c62097bB5eE01Da',\n    collateral: '0x0000000000000000000000000000000000000000' // TODO: Add your USDC/collateral address\n  };\n  \n  // NOTE: These contracts are deployed on the network you're currently connected to\n  // Make sure you're on the correct network (Sepolia, Goerli, or Mumbai) to interact with them\n\n  // Contract ABIs\n  const basketPricerABI = [\n    \"function calculateWeightedBasketPrice(string[] calldata symbols, int256[] calldata w1e18) external view returns (int256 etfPrice)\",\n    \"function boundsForBand(int256 etfPrice, uint16 bandBps) external pure returns (int256 lower1e18, int256 upper1e18)\",\n    \"function quoteAndBounds(string[] calldata symbols, int256[] calldata w1e18, uint16 bandBps) external view returns (int256 etfPrice, int256 lower, int256 upper)\"\n  ];\n\n  const feedAggregatorABI = [\n    \"function getPrices(string[] calldata symbols) external view returns (int256[] memory prices, uint8[] memory decimals, uint256[] memory updatedAts)\",\n    \"function addFeedMapping(string memory symbol, address aggregator, uint48 maxDelay) external\",\n    \"function owner() external view returns (address)\",\n    \"error UnknownFeed(string symbol)\",\n    \"error StalePrice(string symbol, uint256 updatedAt, uint256 nowTs, uint256 maxDelay)\"\n  ];\n\n  const predictionMarketFactoryABI = [\n    \"function create(string[] calldata symbols, int256[] calldata w1e18, uint16 bandBps, uint64 settleTs) external returns (address mkt, address vault)\",\n    \"function marketsByCreator(address creator) external view returns (address[] memory)\",\n    \"function allMarkets() external view returns (address[] memory)\",\n    \"event MarketCreated(address indexed market, address indexed creator, address vault, uint256 withinId, uint256 outsideId, int256 strike1e18, int256 lower1e18, int256 upper1e18, uint16 bandBps, uint64 settleTs)\"\n  ];\n\n  const predictionMarketABI = [\n    \"function symbols() external view returns (string[] memory)\",\n    \"function w1e18() external view returns (int256[] memory)\",\n    \"function strike() external view returns (int256)\",\n    \"function lower() external view returns (int256)\",\n    \"function upper() external view returns (int256)\",\n    \"function bandBps() external view returns (uint16)\",\n    \"function settleTs() external view returns (uint64)\",\n    \"function outcome() external view returns (uint8)\",\n    \"function finalPrice() external view returns (int256)\",\n    \"function settle() external\"\n  ];\n\n  useEffect(() => {\n    if (currentNetwork && currentNetwork.chainId) {\n      console.log('Network changed, loading feeds for chain ID:', currentNetwork.chainId);\n      const networkFeeds = availableFeeds[currentNetwork.chainId] || [];\n      console.log('Available feeds for this network:', networkFeeds);\n      \n      // Validate that all addresses are unique and properly formatted\n      const validFeeds = networkFeeds.filter(feed => {\n        try {\n          if (ethers) {\n            const checksummedAddress = ethers.getAddress(feed.address);\n            console.log(`✓ Valid address for ${feed.name}: ${feed.address} -> ${checksummedAddress}`);\n            return true;\n          }\n          console.log(`✗ No ethers available for ${feed.name}`);\n          return false;\n        } catch (error) {\n          console.error(`✗ Invalid address for feed ${feed.name}:`, feed.address, error);\n          return false;\n        }\n      });\n      \n      console.log('Valid feeds after address validation:', validFeeds);\n      \n      // Debug: Check feed properties\n      validFeeds.forEach(feed => {\n        console.log(`Feed ${feed.name}:`, {\n          address: feed.address,\n          weight: feed.weight,\n          weightType: typeof feed.weight,\n          decimals: feed.decimals,\n          category: feed.category\n        });\n      });\n      \n      // Remove duplicates\n      const addresses = validFeeds.map(f => f.address);\n      const uniqueAddresses = new Set(addresses);\n      \n      if (addresses.length !== uniqueAddresses.size) {\n        console.error('Duplicate addresses found in feeds:', addresses);\n        // Remove duplicates by keeping only the first occurrence\n        const uniqueFeeds = validFeeds.filter((feed, index) => \n          addresses.indexOf(feed.address) === index\n        );\n        console.log('Setting feeds with duplicates removed:', uniqueFeeds);\n        setFeeds(uniqueFeeds);\n      } else {\n        console.log('Setting feeds (all addresses valid and unique):', validFeeds);\n        setFeeds(validFeeds);\n      }\n    }\n  }, [currentNetwork, ethers]);\n\n  // Utility function to safely convert any value to a number\n  const safeNumberConversion = (value) => {\n    if (typeof value === 'bigint') {\n      return Number(value);\n    }\n    if (typeof value === 'string') {\n      const parsed = parseFloat(value);\n      return isNaN(parsed) ? null : parsed;\n    }\n    if (typeof value === 'number' && !isNaN(value)) {\n      return value;\n    }\n    return null;\n  };\n\n  // Utility function to safely format BigInt or string values for display\n  const safeFormatUnits = (value, decimals = 18) => {\n    try {\n      if (typeof value === 'string') {\n        // If it's already a string, try to parse it using ethers\n        const bigIntValue = ethers.parseUnits(value, 0); // Parse as whole number\n        return ethers.formatUnits(bigIntValue, decimals);\n      } else if (typeof value === 'bigint') {\n        return ethers.formatUnits(value, decimals);\n      } else {\n        return value.toString();\n      }\n    } catch (error) {\n      console.warn('Error formatting value:', value, error);\n      return value.toString();\n    }\n  };\n\n  // Get live price from Chainlink feed\n  const getLivePrice = async (feedAddress) => {\n    if (!provider || !isConnected || !ethers) {\n      console.log('Cannot fetch price:', { provider: !!provider, isConnected, ethers: !!ethers });\n      return null;\n    }\n    \n    try {\n      // Validate and checksum the address\n      let validAddress;\n      try {\n        validAddress = ethers.getAddress(feedAddress);\n        console.log(`Original address: ${feedAddress}`);\n        console.log(`Checksummed address: ${validAddress}`);\n      } catch (addressError) {\n        console.error('Invalid address format:', addressError);\n        return null;\n      }\n      \n      console.log(`Fetching price for feed: ${validAddress}`);\n      const contract = new ethers.Contract(validAddress, chainlinkABI, provider);\n      \n      console.log('Contract created, fetching latestRoundData...');\n      const roundData = await contract.latestRoundData();\n      console.log('Round data received:', roundData);\n      \n      console.log('Fetching decimals...');\n      const decimals = await contract.decimals();\n      console.log('Decimals:', decimals);\n      \n      // Convert both answer and decimals to numbers - handle BigInt values\n      const answerNumber = safeNumberConversion(roundData.answer);\n      const decimalsNumber = safeNumberConversion(decimals);\n      \n      if (answerNumber === null) {\n        console.error('Could not convert answer to number:', roundData.answer);\n        return null;\n      }\n      \n      if (decimalsNumber === null) {\n        console.error('Could not convert decimals to number:', decimals);\n        return null;\n      }\n      \n      const price = answerNumber / Math.pow(10, decimalsNumber);\n      console.log(`Converted answer: ${answerNumber}, decimals: ${decimalsNumber}, calculated price: ${price}`);\n      \n      return price;\n    } catch (error) {\n      console.error('Error fetching price from feed:', error);\n      console.error('Error details:', {\n        message: error.message,\n        code: error.code,\n        data: error.data\n      });\n      return null;\n    }\n  };\n\n  // Refresh all feed prices\n  const refreshPrices = useCallback(async () => {\n    if (!isConnected || !ethers) {\n      console.error('Cannot refresh prices: not connected or ethers not available');\n      return;\n    }\n    \n    if (isFetching) {\n      console.log('Price fetch already in progress, skipping...');\n      return;\n    }\n    \n    setIsFetching(true);\n    setLoading(true);\n    \n    try {\n      console.log(`Starting price fetch for ${feeds.length} feeds...`);\n      const updatedFeeds = await Promise.all(\n        feeds.map(async (feed) => {\n          try {\n            console.log(`Fetching price for ${feed.name} (${feed.address})`);\n            const price = await getLivePrice(feed.address);\n            console.log(`Got price for ${feed.name}:`, price);\n            return { ...feed, currentPrice: price };\n          } catch (feedError) {\n            console.error(`Error fetching price for ${feed.name}:`, feedError);\n            return { ...feed, currentPrice: null };\n          }\n        })\n      );\n      console.log('All price fetches completed, updating feeds...');\n      setFeeds(updatedFeeds);\n    } catch (error) {\n      console.error('Error refreshing prices:', error);\n    } finally {\n      setLoading(false);\n      setIsFetching(false);\n    }\n  }, [feeds, isConnected, ethers, isFetching]);\n\n  // Toggle feed selection\n  const toggleFeedSelection = (feed) => {\n    console.log('Toggling feed selection:', {\n      feed,\n      weight: feed.weight,\n      weightType: typeof feed.weight\n    });\n    \n    setSelectedFeeds(prev => {\n      const isSelected = prev.some(f => f.address === feed.address);\n      if (isSelected) {\n        return prev.filter(f => f.address !== feed.address);\n      } else {\n        // Ensure the feed object has all necessary properties\n        const feedWithWeight = {\n          ...feed,\n          weight: feed.weight || (1 / (prev.length + 1)) // Fallback weight if not set\n        };\n        console.log('Adding feed with weight:', feedWithWeight);\n        return [...prev, feedWithWeight];\n      }\n    });\n  };\n\n  // Filter feeds based on search and category\n  const filteredFeeds = feeds.filter(feed => {\n    if (!feed || !feed.name || !feed.description) return false;\n    \n    const matchesSearch = feed.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         feed.description.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = filterCategory === 'all' || feed.category === filterCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  // Get category display name\n  const getCategoryDisplayName = (category) => {\n    const categories = {\n      'crypto': 'Cryptocurrencies',\n      'stablecoin': 'Stablecoins',\n      'forex': 'Forex',\n      'commodities': 'Commodities'\n    };\n    return categories[category] || category;\n  };\n\n  // Check what feeds are registered in your FeedAggregator contract\n  const getRegisteredFeeds = async () => {\n    if (!provider || !isConnected) {\n      console.log('Cannot check registered feeds: not connected');\n      return null;\n    }\n    \n    try {\n      console.log('Checking registered feeds in FeedAggregator contract...');\n      const contract = new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator, feedAggregatorABI, provider);\n      \n      // Try to get the owner to verify contract is accessible\n      const owner = await contract.owner();\n      console.log('Contract owner:', owner);\n      \n      // Use the symbol format that matches your contract mappings\n      const testSymbols = ['ETH', 'BTC', 'LINK'];\n      console.log('Testing with symbol format:', testSymbols);\n      \n      return { owner, testSymbols };\n    } catch (error) {\n      console.error('Error checking registered feeds:', error);\n      return null;\n    }\n  };\n\n  // Get prices from your deployed FeedAggregator contract\n  const getContractPrices = async (symbols) => {\n    if (!provider || !isConnected) {\n      console.log('Cannot fetch contract prices: not connected');\n      return null;\n    }\n    \n    try {\n      console.log('Fetching prices from FeedAggregator contract for symbols:', symbols);\n      console.log('Symbols type:', typeof symbols, 'Length:', symbols.length);\n      console.log('Symbols content:', JSON.stringify(symbols));\n      \n      const contract = new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator, feedAggregatorABI, provider);\n      \n      const result = await contract.getPrices(symbols);\n      console.log('Contract prices result:', result);\n      console.log('Result type:', typeof result);\n      console.log('Result keys:', Object.keys(result));\n      console.log('Prices type:', typeof result.prices);\n      console.log('Decimals type:', typeof result.decimals);\n      console.log('UpdatedAts type:', typeof result.updatedAts);\n      \n      // Convert BigInt values to strings to avoid mixing types\n      return {\n        prices: result.prices.map(p => p.toString()),\n        decimals: result.decimals.map(d => d.toString()),\n        updatedAts: result.updatedAts.map(t => t.toString())\n      };\n    } catch (error) {\n      console.error('Error fetching contract prices:', error);\n      console.error('Error details:', {\n        message: error.message,\n        code: error.code,\n        data: error.data,\n        reason: error.reason\n      });\n      \n      // Try to decode the revert reason if available\n      if (error.data && error.data !== '0x') {\n        try {\n          const iface = new ethers.Interface(feedAggregatorABI);\n          const decodedError = iface.parseError(error.data);\n          console.error('Decoded FeedAggregator error:', decodedError);\n          \n          // Show user-friendly error message\n          if (decodedError && decodedError.name === 'UnknownFeed') {\n            console.error('This means the feed mapping for one or more symbols is not set up in your FeedAggregator contract');\n            console.error('You need to run the SetupFeedMappings script to add the feed mappings');\n          }\n        } catch (decodeError) {\n          console.error('Could not decode error data:', decodeError);\n        }\n      }\n      \n      return null;\n    }\n  };\n\n  // Create a prediction market for the selected ETF basket (ONLINE CONTRACT VERSION)\n  const createPredictionMarket = async (symbols, weights, bandBps = 500, settleDays = 7) => {\n    console.log('=== createPredictionMarket FUNCTION STARTED (ONLINE MODE) ===');\n    console.log('Parameters received:', { symbols, weights, bandBps, settleDays });\n    \n    try {\n      console.log('Creating prediction market with:', { symbols, weights, bandBps, settleDays });\n      \n      // Input validation\n      if (!Array.isArray(symbols) || symbols.length === 0) {\n        throw new Error(`Invalid symbols: ${JSON.stringify(symbols)}. Must be a non-empty array.`);\n      }\n      if (!Array.isArray(weights) || weights.length === 0) {\n        throw new Error(`Invalid weights: ${JSON.stringify(weights)}. Must be a non-empty array.`);\n      }\n      if (symbols.length !== weights.length) {\n        throw new Error(`Mismatch: symbols length (${symbols.length}) != weights length (${weights.length})`);\n      }\n      \n      // Debug: Log the exact data being processed\n      console.log('createPredictionMarket input validation passed:');\n      console.log('- Symbols:', symbols);\n      console.log('- Weights:', weights);\n      console.log('- Symbols types:', symbols.map(s => typeof s));\n      console.log('- Weights types:', weights.map(w => typeof w));\n      console.log('- Weights values:', weights.map(w => w));\n      \n      // Calculate settlement timestamp (current time + settleDays)\n      const settleTs = Math.floor(Date.now() / 1000) + (settleDays * 24 * 60 * 60);\n      \n      // Check if we have the required contracts and wallet connection\n      if (!provider || !isConnected || !signer) {\n        throw new Error('Wallet not connected or provider not available');\n      }\n      \n      if (CONTRACT_ADDRESSES.predictionMarketFactory === '0x0000000000000000000000000000000000000000') {\n        throw new Error('PredictionMarketFactory address not set');\n      }\n      \n      // Convert weights to 1e18 format for contract call\n      const weights1e18 = weights.map(w => ethers.parseUnits(w.toString(), 18));\n      \n      console.log('Contract call parameters:', {\n        symbols,\n        weights1e18: weights1e18.map(w => w.toString()),\n        bandBps,\n        settleTs\n      });\n      \n      // Create contract instances\n      const factory = new ethers.Contract(CONTRACT_ADDRESSES.predictionMarketFactory, predictionMarketFactoryABI, signer);\n      \n      // Call the factory to create the market\n      console.log('Calling EtfPredictionMarketFactory.create...');\n      const tx = await factory.create(symbols, weights1e18, bandBps, settleTs);\n      console.log('Transaction sent:', tx.hash);\n      \n      // Wait for transaction confirmation\n      console.log('Waiting for transaction confirmation...');\n      const receipt = await tx.wait();\n      console.log('Transaction confirmed:', receipt.hash);\n      \n      // Parse the MarketCreated event\n      const event = receipt.logs.find(log => {\n        try {\n          const parsed = factory.interface.parseLog(log);\n          return parsed.name === 'MarketCreated';\n        } catch {\n          return false;\n        }\n      });\n      \n      if (!event) {\n        throw new Error('MarketCreated event not found in transaction receipt');\n      }\n      \n      const parsedEvent = factory.interface.parseLog(event);\n      const { market, vault, withinId, outsideId, strike, lower, upper } = parsedEvent.args;\n      \n      console.log('Market created successfully:', {\n        market: market.toString(),\n        vault: vault.toString(),\n        withinId: withinId.toString(),\n        outsideId: outsideId.toString(),\n        strike: strike.toString(),\n        lower: lower.toString(),\n        upper: upper.toString()\n      });\n      \n      // Return the real market data\n      return {\n        market: market.toString(),\n        vault: vault.toString(),\n        withinId: withinId.toString(),\n        outsideId: outsideId.toString(),\n        strike: strike.toString(),\n        lower: lower.toString(),\n        upper: upper.toString(),\n        bandBps: bandBps,\n        settleTs: settleTs\n      };\n    } catch (error) {\n      console.error('=== ERROR IN createPredictionMarket ===');\n      console.error('Error message:', error.message);\n      console.error('Error stack:', error.stack);\n      console.error('Error type:', error.constructor.name);\n      console.error('Full error object:', error);\n      return null;\n    }\n  };\n\n  // Calculate ETF basket price using your deployed BasketPricer contract\n  const calculateContractBasketPrice = async (symbols, weights) => {\n    if (!provider || !isConnected) {\n      console.log('Cannot calculate contract basket price: not connected');\n      return null;\n    }\n    \n    try {\n      console.log('Calculating basket price using BasketPricer contract');\n      console.log('Symbols:', symbols);\n      console.log('Weights (1e18):', weights);\n      console.log('Symbols type:', typeof symbols, 'Length:', symbols.length);\n      console.log('Weights type:', typeof weights, 'Length:', weights.length);\n      \n      const contract = new ethers.Contract(CONTRACT_ADDRESSES.basketPricer, basketPricerABI, provider);\n      \n      // Convert weights to 1e18 format (using ethers.parseUnits for compatibility)\n      const weights1e18 = weights.map(w => ethers.parseUnits(w.toString(), 18));\n      console.log('Converted weights1e18:', weights1e18);\n      console.log('Weights1e18 type:', typeof weights1e18, 'Length:', weights1e18.length);\n      \n      // Validate inputs before calling contract\n      if (symbols.length === 0) {\n        throw new Error('Symbols array is empty');\n      }\n      if (weights1e18.length === 0) {\n        throw new Error('Weights array is empty');\n      }\n      if (symbols.length !== weights1e18.length) {\n        throw new Error(`Symbols length (${symbols.length}) != weights length (${weights1e18.length})`);\n      }\n      \n      console.log('Calling contract.quoteAndBounds with:', {\n        symbols,\n        weights1e18: weights1e18.map(w => w.toString()),\n        bandBps: 500\n      });\n      \n      const result = await contract.quoteAndBounds(symbols, weights1e18, 500); // 5% band\n      console.log('Contract basket calculation result:', result);\n      \n      return {\n        etfPrice: result.etfPrice,\n        lower: result.lower,\n        upper: result.upper\n      };\n    } catch (error) {\n      console.error('Error calculating contract basket price:', error);\n      console.error('Error details:', {\n        message: error.message,\n        code: error.code,\n        data: error.data,\n        reason: error.reason\n      });\n      \n      // Try to decode the revert reason if available\n      if (error.data && error.data !== '0x') {\n        try {\n          const iface = new ethers.Interface(basketPricerABI);\n          const decodedError = iface.parseError(error.data);\n          console.error('Decoded BasketPricer error:', decodedError);\n        } catch (decodeError) {\n          console.error('Could not decode BasketPricer error data:', decodeError);\n        }\n      }\n      \n      // Also try to decode using FeedAggregator ABI since the error might come from there\n      if (error.data && error.data !== '0x') {\n        try {\n          const iface = new ethers.Interface(feedAggregatorABI);\n          const decodedError = iface.parseError(error.data);\n          console.error('Decoded FeedAggregator error:', decodedError);\n        } catch (decodeError) {\n          console.error('Could not decode FeedAggregator error data:', decodeError);\n        }\n      }\n      \n      return null;\n    }\n  };\n\n  // Calculate ETF basket price using selected feeds and weights (Frontend calculation)\n  const calculateBasketPrice = useCallback(() => {\n    console.log('calculateBasketPrice called with selectedFeeds:', selectedFeeds);\n    \n    if (selectedFeeds.length === 0) {\n      console.log('No selected feeds, returning null');\n      setBasketPrice(null);\n      setBasketCalculation(null);\n      return null;\n    }\n    \n    let totalWeight = 0;\n    let weightedPrice = 0;\n    const calculations = [];\n    \n    // Filter feeds that have valid prices\n    const validFeeds = selectedFeeds.filter(feed => \n      feed.currentPrice !== undefined && \n      feed.currentPrice !== null && \n      !isNaN(feed.currentPrice) &&\n      feed.currentPrice > 0 &&\n      typeof feed.currentPrice === 'number'\n    );\n    \n    console.log('Valid feeds with prices:', validFeeds.length, 'out of', selectedFeeds.length);\n    \n    if (validFeeds.length === 0) {\n      console.log('No valid feeds with prices, returning null');\n      setBasketPrice(null);\n      setBasketCalculation(null);\n      return null;\n    }\n    \n    validFeeds.forEach(feed => {\n      const weight = Number(feed.weight) || (1 / validFeeds.length); // Ensure weight is a number\n      const price = Number(feed.currentPrice); // Ensure it's a number\n      \n      console.log(`Processing feed ${feed.name}:`, { weight, price, currentPrice: feed.currentPrice });\n      \n      // Additional safety check for BigInt or other non-number types\n      if (typeof price !== 'number' || isNaN(price)) {\n        console.warn(`Skipping feed ${feed.name} with invalid price:`, feed.currentPrice);\n        return;\n      }\n      \n      if (typeof weight !== 'number' || isNaN(weight)) {\n        console.warn(`Skipping feed ${feed.name} with invalid weight:`, feed.weight);\n        return;\n      }\n      \n      const contribution = price * weight;\n      \n      calculations.push({\n        symbol: feed.name.split('/')[0],\n        price: price,\n        weight: weight,\n        contribution: contribution,\n        decimals: feed.decimals\n      });\n      \n      weightedPrice += contribution;\n      totalWeight += weight;\n    });\n    \n    if (totalWeight > 0 && calculations.length > 0) {\n      const basketPrice = weightedPrice / totalWeight;\n      console.log('Basket calculation successful:', {\n        validFeeds: validFeeds.length,\n        totalWeight,\n        weightedPrice,\n        basketPrice,\n        calculations\n      });\n      setBasketPrice(basketPrice);\n      setBasketCalculation(calculations);\n      return basketPrice; // Return the calculated price\n    } else {\n      console.log('Basket calculation failed - no valid calculations');\n      setBasketPrice(null);\n      setBasketCalculation(null);\n      return null;\n    }\n  }, [selectedFeeds]);\n\n  // Calculate price bands for prediction markets\n  const calculatePriceBands = (price, bandBps = 500) => { // Default 5% band\n    if (!price) return null;\n    \n    const band = bandBps / 10000; // Convert basis points to decimal\n    const lower = price * (1 - band);\n    const upper = price * (1 + band);\n    \n    return { lower, upper, bandBps };\n  };\n\n  // Auto-fetch prices when feeds are loaded and wallet is connected\n  useEffect(() => {\n    if (feeds.length > 0 && isConnected && provider && !loading && !isFetching) {\n      console.log('Auto-fetching prices for feeds:', feeds.length);\n      console.log('Provider available:', !!provider);\n      console.log('Wallet connected:', isConnected);\n      console.log('Current loading state:', loading);\n      console.log('Current fetching state:', isFetching);\n      refreshPrices();\n    } else {\n      console.log('Auto-fetch conditions not met:', {\n        feedsLength: feeds.length,\n        isConnected,\n        hasProvider: !!provider,\n        isLoading: loading,\n        isFetching: isFetching\n      });\n    }\n  }, [feeds, isConnected, provider, refreshPrices, loading, isFetching]);\n\n  // Auto-calculate basket price when selected feeds or prices change\n  useEffect(() => {\n    if (selectedFeeds.length > 0) {\n      // Check if we have prices for all selected feeds\n      const feedsWithPrices = selectedFeeds.filter(feed => \n        feed.currentPrice !== undefined && feed.currentPrice !== null\n      );\n      \n      if (feedsWithPrices.length === selectedFeeds.length) {\n        calculateBasketPrice();\n      }\n    }\n  }, [selectedFeeds, calculateBasketPrice]);\n\n  // Error boundary for the component\n  if (!ethers) {\n    return (\n      <div className=\"chainlink-feeds\">\n        <div className=\"error-message\">\n          <h2>⚠️ Error Loading Chainlink Feeds</h2>\n          <p>Ethers library is not available. Please check your dependencies.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"chainlink-feeds\">\n      <div className=\"feeds-header\">\n        <h2>🔗 Chainlink Price Feeds</h2>\n        <p>Select and monitor real-time price feeds from Chainlink oracles</p>\n      </div>\n\n      {/* Network Info */}\n      {currentNetwork && (\n        <div className=\"network-info-banner\">\n          <span className=\"network-badge\">\n            🌐 {currentNetwork.name}\n          </span>\n          <span className=\"chain-id-badge\">\n            Chain ID: {currentNetwork.chainId}\n          </span>\n          {!isConnected && (\n            <span className=\"warning-badge\">\n              ⚠️ Connect wallet to view live prices\n            </span>\n          )}\n          {isConnected && (\n            <span className=\"status-badge\">\n              ✅ Wallet Connected\n            </span>\n          )}\n        </div>\n      )}\n\n      {/* Controls */}\n      <div className=\"feeds-controls\">\n        <div className=\"search-filter\">\n          <input\n            type=\"text\"\n            placeholder=\"Search feeds...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"search-input\"\n          />\n          \n          <select\n            value={filterCategory}\n            onChange={(e) => setFilterCategory(e.target.value)}\n            className=\"category-filter\"\n          >\n            <option value=\"all\">All Categories</option>\n            <option value=\"crypto\">Cryptocurrencies</option>\n            <option value=\"stablecoin\">Stablecoins</option>\n            <option value=\"forex\">Forex</option>\n            <option value=\"commodities\">Commodities</option>\n          </select>\n        </div>\n\n        <div className=\"refresh-section\">\n          {!isConnected ? (\n            <div className=\"connect-prompt\">\n              <span className=\"warning-text\">⚠️ Connect your wallet to view live prices</span>\n            </div>\n          ) : (\n            <>\n              <button\n                onClick={refreshPrices}\n                disabled={loading}\n                className=\"refresh-button primary\"\n              >\n                {loading ? '🔄 Refreshing...' : '🔄 Refresh Prices'}\n              </button>\n              \n              <div className=\"refresh-status\">\n                {loading ? (\n                  <span className=\"loading-indicator\">⏳ Fetching prices for {feeds.length} feeds...</span>\n                ) : (\n                  <span className=\"status-indicator\">\n                    {feeds.filter(f => f.currentPrice !== undefined && f.currentPrice !== null).length} of {feeds.length} feeds have prices\n                  </span>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n        \n        {/* Debug Panel */}\n        <div className=\"debug-panel\">\n          <details>\n            <summary>🐛 Debug Info</summary>\n            <div className=\"debug-content\">\n              <div><strong>Provider:</strong> {provider ? 'Available' : 'Not Available'}</div>\n              <div><strong>Signer:</strong> {signer ? 'Available' : 'Not Available'}</div>\n              <div><strong>Connected:</strong> {isConnected ? 'Yes' : 'No'}</div>\n              <div><strong>Account:</strong> {account || 'None'}</div>\n              <div><strong>Network:</strong> {currentNetwork ? `${currentNetwork.name} (${currentNetwork.chainId})` : 'None'}</div>\n              <div><strong>Feeds Count:</strong> {feeds.length}</div>\n              <div><strong>Selected Feeds:</strong> {selectedFeeds.length}</div>\n              <div><strong>Ethers Version:</strong> {ethers ? ethers.version || 'Unknown' : 'Not Available'}</div>\n              <div><strong>Loading State:</strong> {loading ? 'Yes' : 'No'}</div>\n              <div><strong>Fetching State:</strong> {isFetching ? 'Yes' : 'No'}</div>\n              <div><strong>Available Feeds for Network:</strong> {currentNetwork ? availableFeeds[currentNetwork.chainId]?.length || 0 : 0}</div>\n            </div>\n          </details>\n        </div>\n        \n        {/* Contract Integration Panel */}\n        <div className=\"contract-panel\">\n          <details>\n            <summary>📋 Contract Integration</summary>\n            <div className=\"contract-content\">\n              <div><strong>BasketPricer:</strong> {CONTRACT_ADDRESSES.basketPricer}</div>\n              <div><strong>FeedAggregator:</strong> {CONTRACT_ADDRESSES.feedAggregator}</div>\n              <div><strong>Network:</strong> {currentNetwork ? currentNetwork.name : 'Unknown'}</div>\n              <div><strong>Integration Status:</strong> {isConnected ? '🟢 Ready' : '🔴 Connect Wallet'}</div>\n            </div>\n          </details>\n        </div>\n      </div>\n\n      {/* Feeds Grid */}\n      <div className=\"feeds-grid\">\n        {filteredFeeds.length === 0 ? (\n          <div className=\"no-feeds\">\n            <p>No feeds available for the current network</p>\n            <p>Switch to a supported testnet (Goerli, Sepolia, or Mumbai)</p>\n            {ethers && (\n              <div className=\"address-validation-info\">\n                <p><strong>Note:</strong> Some feeds may have been filtered out due to invalid addresses.</p>\n                <p>Check the console for specific address validation errors.</p>\n              </div>\n            )}\n          </div>\n        ) : (\n          filteredFeeds.map((feed, index) => {\n            if (!feed || !feed.address || !feed.name) return null;\n            \n            return (\n              <div\n                key={`${feed.address}-${index}`}\n                className={`feed-card ${selectedFeeds.some(f => f.address === feed.address) ? 'selected' : ''}`}\n                onClick={() => toggleFeedSelection(feed)}\n              >\n                <div className=\"feed-header\">\n                  <h3>{feed.name || 'Unknown Feed'}</h3>\n                  <span className=\"category-tag\">{getCategoryDisplayName(feed.category || 'unknown')}</span>\n                </div>\n                \n                <p className=\"feed-description\">{feed.description || 'No description available'}</p>\n                \n                <div className=\"feed-details\">\n                  <div className=\"detail-row\">\n                    <span className=\"label\">Address:</span>\n                    <span className=\"value address\">\n                      {feed.address ? `${feed.address.slice(0, 6)}...${feed.address.slice(-4)}` : 'Invalid Address'}\n                    </span>\n                  </div>\n                  \n                  <div className=\"detail-row\">\n                    <span className=\"label\">Decimals:</span>\n                    <span className=\"value\">{feed.decimals || 8}</span>\n                  </div>\n                  \n                  <div className=\"detail-row\">\n                    <span className=\"label\">Weight:</span>\n                    <span className=\"value weight\">\n                      {((feed.weight || (1 / (feeds.length || 1))) * 100).toFixed(1)}%\n                    </span>\n                  </div>\n                  \n                  <div className=\"detail-row\">\n                    <span className=\"label\">Current Price:</span>\n                    <span className=\"value price\">\n                      {feed.currentPrice !== undefined && feed.currentPrice !== null && !isNaN(feed.currentPrice) && typeof feed.currentPrice === 'number' ? (\n                        `$${feed.currentPrice.toFixed(4)}`\n                      ) : (\n                        isConnected ? (\n                          <span className=\"loading-status\">\n                            {loading ? '⏳ Fetching...' : 'Loading...'} \n                            <button \n                              className=\"retry-button\"\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                getLivePrice(feed.address).then(price => {\n                                  const updatedFeeds = feeds.map(f => \n                                    f.address === feed.address ? { ...f, currentPrice: price } : f\n                                  );\n                                  setFeeds(updatedFeeds);\n                                });\n                              }}\n                            >\n                              🔄 Retry\n                            </button>\n                          </span>\n                        ) : 'Connect wallet'\n                      )}\n                    </span>\n                  </div>\n                </div>\n                \n                <div className=\"feed-actions\">\n                  <button\n                    className=\"select-button\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      toggleFeedSelection(feed);\n                    }}\n                  >\n                    {selectedFeeds.some(f => f.address === feed.address) ? '✓ Selected' : 'Select'}\n                  </button>\n                  \n                  <button\n                    className=\"copy-address-button\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      navigator.clipboard.writeText(feed.address);\n                      alert('Address copied to clipboard!');\n                    }}\n                  >\n                    📋 Copy\n                  </button>\n                </div>\n              </div>\n            );\n          })\n        )}\n      </div>\n\n      {/* Selected Feeds Summary */}\n      {selectedFeeds.length > 0 && (\n        <div className=\"selected-feeds-summary\">\n          <h3>Selected Feeds ({selectedFeeds.length})</h3>\n          <div className=\"selected-feeds-list\">\n            {selectedFeeds.map((feed, index) => {\n              if (!feed || !feed.address) return null;\n              \n              return (\n                <div key={`selected-${feed.address}-${index}`} className=\"selected-feed-item\">\n                  <span className=\"feed-name\">{feed.name || 'Unknown Feed'}</span>\n                  <span className=\"feed-price\">\n                    {feed.currentPrice !== undefined && feed.currentPrice !== null && !isNaN(feed.currentPrice) && typeof feed.currentPrice === 'number' ? \n                      `$${feed.currentPrice.toFixed(4)}` : 'N/A'}\n                  </span>\n                  <button\n                    onClick={() => toggleFeedSelection(feed)}\n                    className=\"remove-button\"\n                  >\n                    ✕\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n          \n          <div className=\"summary-actions\">\n            <button\n              className=\"export-button\"\n              onClick={() => {\n                const feedData = selectedFeeds.map(f => ({\n                  name: f.name,\n                  address: f.address,\n                  description: f.description,\n                  decimals: f.decimals,\n                  category: f.category\n                }));\n                const blob = new Blob([JSON.stringify(feedData, null, 2)], { type: 'application/json' });\n                const url = URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = 'selected-chainlink-feeds.json';\n                a.click();\n                URL.revokeObjectURL(url);\n              }}\n            >\n              📥 Export Selected Feeds\n            </button>\n            \n            <button\n              className=\"clear-button\"\n              onClick={() => setSelectedFeeds([])}\n            >\n              🗑️ Clear All\n            </button>\n            \n            <button\n              className=\"check-feeds-button\"\n              onClick={async () => {\n                try {\n                  const registeredFeeds = await getRegisteredFeeds();\n                  if (registeredFeeds) {\n                    alert(`Contract Status:\\n\\nOwner: ${registeredFeeds.owner}\\nTest Symbols: ${registeredFeeds.testSymbols.join(', ')}\\n\\nNote: These are test symbols. Your contract may not have these feeds registered yet.`);\n                  } else {\n                    alert('Could not check contract status. Check console for details.');\n                  }\n                } catch (error) {\n                  console.error('Check feeds failed:', error);\n                  alert(`Check feeds failed: ${error.message}`);\n                }\n              }}\n            >\n              🔍 Check Contract Status\n            </button>\n            \n            <button\n              className=\"test-weights-button\"\n              onClick={() => {\n                if (selectedFeeds.length === 0) {\n                  alert('Please select some feeds first');\n                  return;\n                }\n                \n                const symbols = selectedFeeds.map(f => f.name);\n                let weights = selectedFeeds.map(f => f.weight || (1 / selectedFeeds.length));\n                \n                // Normalize weights to sum to 1\n                const totalWeight = weights.reduce((sum, w) => sum + w, 0);\n                weights = weights.map(w => w / totalWeight);\n                \n                console.log('Weight test:', {\n                  selectedFeeds: selectedFeeds.map(f => ({ name: f.name, weight: f.weight })),\n                  symbols,\n                  weights,\n                  totalWeight: weights.reduce((sum, w) => sum + w, 0)\n                });\n                \n                // Test weight conversion\n                try {\n                  const weights1e18 = weights.map(w => ethers.parseUnits(w.toString(), 18));\n                  console.log('Weight conversion test:', {\n                    original: weights,\n                    converted: weights1e18.map(w => w.toString()),\n                    allValid: weights1e18.every(w => w.gt(0))\n                  });\n                  alert('Weight test successful! Check console for details.');\n                } catch (error) {\n                  console.error('Weight conversion failed:', error);\n                  alert(`Weight conversion failed: ${error.message}`);\n                }\n              }}\n            >\n              🧪 Test Weights\n            </button>\n            \n            <button\n              className=\"create-market-button\"\n              onClick={async () => {\n                if (selectedFeeds.length === 0) {\n                  alert('Please select some feeds first to create a prediction market');\n                  return;\n                }\n                \n                const symbols = selectedFeeds.map(f => f.name);\n                let weights = selectedFeeds.map(f => {\n                  const weight = f.weight || (1 / selectedFeeds.length);\n                  console.log(`Create Market - Feed ${f.name}: weight=${f.weight}, fallback=${1 / selectedFeeds.length}, final=${weight}`);\n                  return weight;\n                });\n                \n                // Validate inputs before creating market\n                if (symbols.length === 0) {\n                  alert('No symbols selected. Please select some feeds first.');\n                  return;\n                }\n                \n                if (weights.some(w => w === null || w === undefined || isNaN(w) || w <= 0)) {\n                  alert('Invalid weights detected. All weights must be positive numbers.');\n                  return;\n                }\n                \n                // Normalize weights to sum to 1\n                const totalWeight = weights.reduce((sum, w) => sum + w, 0);\n                weights = weights.map(w => w / totalWeight);\n                \n                console.log('Creating prediction market for:', { symbols, weights });\n                console.log('Weight validation:', weights.map((w, i) => ({ index: i, weight: w, valid: w > 0 && !isNaN(w) })));\n                console.log('Normalized weights sum:', weights.reduce((sum, w) => sum + w, 0));\n                \n                // Debug: Check the exact data being passed\n                console.log('DEBUG - Symbols array:', symbols);\n                console.log('DEBUG - Symbols type:', typeof symbols, 'Length:', symbols.length);\n                console.log('DEBUG - Weights array:', weights);\n                console.log('DEBUG - Weights type:', typeof weights, 'Length:', weights.length);\n                console.log('DEBUG - Selected feeds:', selectedFeeds);\n                \n                try {\n                  // Test if function exists\n                  if (typeof createPredictionMarket !== 'function') {\n                    throw new Error(`createPredictionMarket is not a function! Type: ${typeof createPredictionMarket}`);\n                  }\n                  \n                  console.log('Function exists, calling createPredictionMarket...');\n                  console.log('About to call with:', { symbols, weights, bandBps: 500, settleDays: 7 });\n                  \n                  // Test the function call step by step\n                  let result;\n                  try {\n                    console.log('Step 1: Function call starting...');\n                    result = await createPredictionMarket(symbols, weights, 500, 7); // 5% band, 7 days\n                    console.log('Step 2: Function call completed, result:', result);\n                  } catch (callError) {\n                    console.error('Step 2: Function call failed:', callError);\n                    throw callError;\n                  }\n                  \n                  if (result) {\n                    alert(`🎯 Prediction Market Created! (OFFLINE MODE)\\n\\nMarket: ${result.market}\\nVault: ${result.vault}\\nWithin ID: ${result.withinId}\\nOutside ID: ${result.outsideId}\\nStrike: ${ethers.formatUnits(result.strike, 18)}\\nLower: ${ethers.formatUnits(result.lower, 18)}\\nUpper: ${ethers.formatUnits(result.upper, 18)}\\nBand: ${result.bandBps/100}%\\nSettle: ${new Date(result.settleTs * 1000).toLocaleString()}\\n\\nNote: This is a mock market for testing. No actual blockchain transaction occurred.`);\n                    \n                    // Store the created market for later use\n                    const newMarket = {\n                      id: Date.now(),\n                      market: result.market,\n                      vault: result.vault,\n                      symbols,\n                      weights,\n                      strike: result.strike.toString(), // Convert BigInt to string\n                      lower: result.lower.toString(), // Convert BigInt to string\n                      upper: result.upper.toString(), // Convert BigInt to string\n                      bandBps: result.bandBps,\n                      settleTs: result.settleTs,\n                      createdAt: Date.now(),\n                      isMock: true // Mark as mock market\n                    };\n                    \n                    // Store in localStorage for the CLOB page\n                    localStorage.setItem('createdMarkets', JSON.stringify([\n                      ...JSON.parse(localStorage.getItem('createdMarkets') || '[]'),\n                      newMarket\n                    ]));\n                    \n                    console.log('Mock market created and stored:', newMarket);\n                  } else {\n                    alert('Failed to create prediction market. Check console for details.');\n                  }\n                } catch (error) {\n                  console.error('=== BUTTON CLICK ERROR ===');\n                  console.error('Error message:', error.message);\n                  console.error('Error stack:', error.stack);\n                  console.error('Error type:', error.constructor.name);\n                  console.error('Full error object:', error);\n                  alert(`Create market failed: ${error.message}\\n\\nCheck console for detailed error information.`);\n                }\n              }}\n            >\n              🎯 Create Prediction Market (OFFLINE)\n            </button>\n            \n            <button\n              className=\"contract-test-button\"\n              onClick={() => {\n                console.log('=== FUNCTION ACCESSIBILITY TEST ===');\n                console.log('createPredictionMarket:', typeof createPredictionMarket);\n                console.log('calculateContractBasketPrice:', typeof calculateContractBasketPrice);\n                console.log('getRegisteredFeeds:', typeof getRegisteredFeeds);\n                console.log('toggleFeedSelection:', typeof toggleFeedSelection);\n                alert('Check console for function accessibility test results');\n              }}\n            >\n              🔍 Test Function Access\n            </button>\n            \n            <button\n              className=\"contract-test-button\"\n              onClick={async () => {\n                try {\n                  // First, check what feeds are registered in your contract\n                  console.log('Checking registered feeds...');\n                  const registeredFeeds = await getRegisteredFeeds();\n                  console.log('Registered feeds info:', registeredFeeds);\n                  \n                  if (!registeredFeeds) {\n                    alert('Could not check registered feeds. Check console for details.');\n                    return;\n                  }\n                  \n                  // Use selected feeds if available, otherwise fall back to test symbols\n                  let symbols, weights;\n                  if (selectedFeeds.length > 0) {\n                    symbols = selectedFeeds.map(f => f.name); // Use symbol names like \"ETH\"\n                    weights = selectedFeeds.map(f => f.weight || (1 / selectedFeeds.length));\n                    console.log('Using selected feeds with symbols:', symbols);\n                  } else {\n                    // Use the symbols that are actually in your FeedAggregator contract\n                    symbols = ['ETH', 'BTC', 'LINK'];\n                    weights = [0.4, 0.4, 0.2]; // Match the weights defined above\n                    console.log('Using fallback test symbols from your contract:', symbols);\n                  }\n                  \n                  console.log('Final symbols:', symbols);\n                  console.log('Final weights:', weights);\n                  \n                  console.log('Testing contract integration with:', { symbols, weights });\n                  \n                  // First, test if contracts are accessible\n                  console.log('Testing contract accessibility...');\n                  const basketContract = new ethers.Contract(CONTRACT_ADDRESSES.basketPricer, basketPricerABI, provider);\n                  const aggregatorContract = new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator, feedAggregatorABI, provider);\n                  \n                  console.log('Contracts created successfully');\n                  \n                  // Test FeedAggregator\n                  console.log('Testing FeedAggregator...');\n                  const contractPrices = await getContractPrices(symbols);\n                  console.log('FeedAggregator prices:', contractPrices);\n                  \n                  // Test BasketPricer\n                  console.log('Testing BasketPricer...');\n                  const contractBasket = await calculateContractBasketPrice(symbols, weights);\n                  console.log('BasketPricer result:', contractBasket);\n                  \n                  if (contractBasket) {\n                    // Convert ethers BigNumber to readable format\n                    const etfPrice = ethers.formatUnits(contractBasket.etfPrice, 18);\n                    const lowerBand = ethers.formatUnits(contractBasket.lower, 18);\n                    const upperBand = ethers.formatUnits(contractBasket.upper, 18);\n                    \n                    alert(`Contract Integration Test:\\n\\nSymbols Tested: ${symbols.join(', ')}\\nFeedAggregator: ${contractPrices ? '✅ Working' : '❌ Failed'}\\nBasketPricer: ✅ Working\\n\\nETF Price: ${etfPrice}\\nLower Band: ${lowerBand}\\nUpper Band: ${upperBand}`);\n                  } else {\n                    alert('Contract integration test failed. Check console for details.');\n                  }\n                } catch (error) {\n                  console.error('Contract test failed:', error);\n                  alert(`Contract test failed: ${error.message}\\n\\nCheck console for detailed error information.`);\n                }\n              }}\n            >\n              🧪 Test Contracts\n            </button>\n            \n            <button \n              className=\"test-button\"\n              onClick={async () => {\n                if (!provider || !isConnected) {\n                  alert('Please connect your wallet first');\n                  return;\n                }\n                \n                try {\n                  console.log('Testing FeedAggregator only...');\n                  \n                  // Test just the FeedAggregator with a single symbol\n                  const symbols = ['ETH'];\n                  console.log('Testing with single symbol:', symbols);\n                  console.log('Symbols array:', symbols);\n                  console.log('Symbols type:', typeof symbols);\n                  console.log('Symbols length:', symbols.length);\n                  console.log('First symbol:', symbols[0]);\n                  console.log('First symbol type:', typeof symbols[0]);\n                  \n                  const contractPrices = await getContractPrices(symbols);\n                  console.log('FeedAggregator single symbol test result:', contractPrices);\n                  \n                  if (contractPrices) {\n                    // Convert string values back to numbers for formatting\n                    const price = ethers.formatUnits(contractPrices.prices[0], parseInt(contractPrices.decimals[0]));\n                    const updatedAt = new Date(parseInt(contractPrices.updatedAts[0]) * 1000).toLocaleString();\n                    \n                    alert(`FeedAggregator Test:\\n\\nSymbol: ${symbols[0]}\\nPrice: ${price}\\nDecimals: ${contractPrices.decimals[0]}\\nUpdated: ${updatedAt}`);\n                  } else {\n                    alert('FeedAggregator test failed. Check console for details.');\n                  }\n                } catch (error) {\n                  console.error('FeedAggregator test failed:', error);\n                  console.error('Full error object:', error);\n                  console.error('Error message:', error.message);\n                  console.error('Error code:', error.code);\n                  console.error('Error data:', error.data);\n                  console.error('Error reason:', error.reason);\n                  alert(`FeedAggregator test failed: ${error.message}\\n\\nCheck console for detailed error information.`);\n                }\n              }}\n            >\n              🔍 Test FeedAggregator Only\n            </button>\n            \n            <button \n              className=\"test-button\"\n              onClick={async () => {\n                if (!provider || !isConnected) {\n                  alert('Please connect your wallet first');\n                  return;\n                }\n                \n                try {\n                  console.log('Checking registered feeds in FeedAggregator...');\n                  console.log('Contract address:', CONTRACT_ADDRESSES.feedAggregator);\n                  console.log('Provider network:', await provider.getNetwork());\n                  \n                  // Test if we can call the contract at all\n                  const contract = new ethers.Contract(CONTRACT_ADDRESSES.feedAggregator, feedAggregatorABI, provider);\n                  console.log('Contract instance created');\n                  \n                  // Try to get the owner to see if contract is accessible\n                  console.log('Attempting to call contract.owner()...');\n                  const owner = await contract.owner();\n                  console.log('FeedAggregator owner:', owner);\n                  \n                  // Test with a symbol that's definitely not registered\n                  const testSymbols = ['NOT_REGISTERED'];\n                  console.log('Testing with intentionally invalid symbol:', testSymbols);\n                  try {\n                    const result = await contract.getPrices(testSymbols);\n                    console.log('Unexpected success with unregistered symbol:', result);\n                  } catch (error) {\n                    console.log('Expected error with unregistered symbol:', error.message);\n                    console.log('Full error object:', error);\n                    console.log('Error data:', error.data);\n                    \n                    // Try to decode the error\n                    if (error.data && error.data !== '0x') {\n                      try {\n                        const iface = new ethers.Interface(feedAggregatorABI);\n                        const decodedError = iface.parseError(error.data);\n                        console.log('Decoded error:', decodedError);\n                        \n                        if (decodedError && decodedError.name === 'UnknownFeed') {\n                          alert(`FeedAggregator is working but has no feed mappings set up.\\n\\nYou need to run the SetupFeedMappings script to add the feed mappings for ETH, BTC, and LINK.\\n\\nError: ${decodedError.args[0]}`);\n                        }\n                      } catch (decodeError) {\n                        console.error('Could not decode error:', decodeError);\n                      }\n                    }\n                  }\n                  \n                } catch (error) {\n                  console.error('FeedAggregator check failed:', error);\n                  console.error('Full error details:', {\n                    message: error.message,\n                    code: error.code,\n                    data: error.data,\n                    reason: error.reason\n                  });\n                  alert(`FeedAggregator check failed: ${error.message}\\n\\nCheck console for detailed error information.`);\n                }\n              }}\n            >\n              📋 Check Feed Status\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Created Prediction Markets */}\n      <div className=\"created-markets-section\">\n        <div className=\"section-header\">\n          <h3>🎯 Created Prediction Markets</h3>\n          <button \n            className=\"view-clob-button\"\n            onClick={() => {\n              // Navigate to CLOB trading page\n              window.location.href = '/trading';\n            }}\n          >\n            📊 Go to CLOB Trading\n          </button>\n        </div>\n        \n        <div className=\"markets-list\">\n          {(() => {\n            const createdMarkets = JSON.parse(localStorage.getItem('createdMarkets') || '[]');\n            if (createdMarkets.length === 0) {\n              return (\n                <div className=\"no-markets\">\n                  <p>No prediction markets created yet.</p>\n                  <p>Select feeds above and click \"🎯 Create Prediction Market (OFFLINE)\" to create a mock prediction market for testing. No blockchain transaction will occur.</p>\n                  <p className=\"warning-text\">⚠️ This is currently in offline mode for testing. Markets created are stored locally and can be used to test the CLOB trading interface.</p>\n                </div>\n              );\n            }\n            \n            return createdMarkets.map((market, index) => (\n              <div key={market.id} className=\"market-card\">\n                <div className=\"market-header\">\n                  <h4>Market #{index + 1}</h4>\n                  <span className=\"market-status\">\n                    {new Date(market.settleTs * 1000) > new Date() ? '🟡 Active' : '🔴 Settled'}\n                  </span>\n                </div>\n                \n                <div className=\"market-details\">\n                  <div className=\"detail-row\">\n                    <span className=\"label\">Symbols:</span>\n                    <span className=\"value\">{market.symbols.join(', ')}</span>\n                  </div>\n                  <div className=\"detail-row\">\n                    <span className=\"label\">Strike Price:</span>\n                    <span className=\"value\">${safeFormatUnits(market.strike, 18)}</span>\n                  </div>\n                  <div className=\"detail-row\">\n                    <span className=\"label\">Price Band:</span>\n                    <span className=\"value\">\n                      ${safeFormatUnits(market.lower, 18)} - ${safeFormatUnits(market.upper, 18)}\n                    </span>\n                  </div>\n                  <div className=\"detail-row\">\n                    <span className=\"label\">Band Width:</span>\n                    <span className=\"value\">{market.bandBps/100}%</span>\n                  </div>\n                  <div className=\"detail-row\">\n                    <span className=\"label\">Settlement:</span>\n                    <span className=\"value\">{new Date(market.settleTs * 1000).toLocaleString()}</span>\n                  </div>\n                  <div className=\"detail-row\">\n                    <span className=\"label\">Market Address:</span>\n                    <span className=\"value address\">\n                      {market.market.slice(0, 6)}...{market.market.slice(-4)}\n                    </span>\n                  </div>\n                </div>\n                \n                <div className=\"market-actions\">\n                  <button\n                    className=\"trade-button\"\n                    onClick={() => {\n                      // Navigate to CLOB trading with this market\n                      localStorage.setItem('selectedMarket', JSON.stringify(market));\n                      window.location.href = '/trading';\n                    }}\n                  >\n                    🚀 Trade This Market\n                  </button>\n                </div>\n              </div>\n            ));\n          })()}\n        </div>\n      </div>\n\n      {/* ETF Basket Calculator */}\n      {selectedFeeds.length > 0 && (\n        <div className=\"basket-calculator\">\n          <div className=\"calculator-header\">\n            <h3>📊 ETF Basket Calculator</h3>\n            <div className=\"calculator-controls\">\n              <button \n                className=\"refresh-basket-button\"\n                onClick={calculateBasketPrice}\n                disabled={selectedFeeds.length === 0}\n              >\n                🔄 Refresh Basket\n              </button>\n              <button \n                className=\"toggle-calculator-button\"\n                onClick={() => setShowBasketCalculator(!showBasketCalculator)}\n              >\n                {showBasketCalculator ? '🔽 Hide' : '🔼 Show'} Calculator\n              </button>\n            </div>\n          </div>\n          \n          {showBasketCalculator && (\n            <div className=\"calculator-content\">\n              {/* Basket Price Display */}\n              <div className=\"basket-price-display\">\n                <div className=\"price-main\">\n                  <span className=\"label\">Basket NAV:</span>\n                  <span className=\"value\">\n                    {basketPrice ? `$${basketPrice.toFixed(4)}` : (\n                      selectedFeeds.some(f => f.currentPrice === undefined) ? \n                      'Loading prices...' : 'No valid prices'\n                    )}\n                  </span>\n                </div>\n                \n                {/* Debug Info */}\n                <div className=\"debug-info\">\n                  <small>\n                    Selected feeds: {selectedFeeds.length} | \n                    Feeds with prices: {selectedFeeds.filter(f => f.currentPrice !== undefined && f.currentPrice !== null).length} |\n                    Status: {basketPrice ? 'Calculated' : 'Waiting for prices'}\n                  </small>\n                </div>\n                \n                {basketPrice && (\n                  <div className=\"price-bands\">\n                    <div className=\"band-info\">\n                      <span className=\"band-label\">5% Band:</span>\n                      <span className=\"band-range\">\n                        ${calculatePriceBands(basketPrice, 500)?.lower.toFixed(4)} - ${calculatePriceBands(basketPrice, 500)?.upper.toFixed(4)}\n                      </span>\n                    </div>\n                    <div className=\"band-info\">\n                      <span className=\"band-label\">10% Band:</span>\n                      <span className=\"band-range\">\n                        ${calculatePriceBands(basketPrice, 1000)?.lower.toFixed(4)} - ${calculatePriceBands(basketPrice, 1000)?.upper.toFixed(4)}\n                      </span>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Basket Composition */}\n              {basketCalculation && (\n                <div className=\"basket-composition\">\n                  <h4>Basket Composition</h4>\n                  <div className=\"composition-table\">\n                    <div className=\"table-header\">\n                      <span>Asset</span>\n                      <span>Price</span>\n                      <span>Weight</span>\n                      <span>Contribution</span>\n                    </div>\n                    {basketCalculation.map((item, index) => (\n                      <div key={`basket-${item.symbol}-${index}`} className=\"composition-row\">\n                        <span className=\"asset-symbol\">{item.symbol}</span>\n                        <span className=\"asset-price\">${item.price.toFixed(4)}</span>\n                        <span className=\"asset-weight\">{(item.weight * 100).toFixed(1)}%</span>\n                        <span className=\"asset-contribution\">${item.contribution.toFixed(4)}</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Smart Contract Integration */}\n              <div className=\"contract-integration\">\n                <h4>🔗 Smart Contract Integration</h4>\n                <div className=\"integration-info\">\n                  <p>Use these parameters with your <code>EtfFeedAggregator</code> and <code>BasketPricer</code> contracts:</p>\n                  \n                  <div className=\"contract-params\">\n                    <div className=\"param-group\">\n                      <label>Symbols Array:</label>\n                      <code className=\"param-value\">\n                        {JSON.stringify(selectedFeeds.map(f => f.name.split('/')[0]))}\n                      </code>\n                    </div>\n                    \n                    <div className=\"param-group\">\n                      <label>Weights (1e18):</label>\n                      <code className=\"param-value\">\n                        {JSON.stringify(selectedFeeds.map(f => Math.floor((f.weight || (1 / selectedFeeds.length)) * 1e18)))}\n                      </code>\n                    </div>\n                    \n                    <div className=\"param-group\">\n                      <label>Feed Addresses:</label>\n                      <code className=\"param-value\">\n                        {JSON.stringify(selectedFeeds.map(f => f.address))}\n                      </code>\n                    </div>\n                  </div>\n                  \n                  <div className=\"contract-actions\">\n                    <button \n                      className=\"copy-params-button\"\n                      onClick={() => {\n                        const params = {\n                          symbols: selectedFeeds.map(f => f.name.split('/')[0]),\n                          weights: selectedFeeds.map(f => Math.floor((f.weight || (1 / selectedFeeds.length)) * 1e18)),\n                          addresses: selectedFeeds.map(f => f.address),\n                          basketPrice: basketPrice,\n                          timestamp: new Date().toISOString()\n                        };\n                        navigator.clipboard.writeText(JSON.stringify(params, null, 2));\n                        alert('Contract parameters copied to clipboard!');\n                      }}\n                    >\n                      📋 Copy Contract Params\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Help Section */}\n      <div className=\"help-section\">\n        <h3>💡 How to Use</h3>\n        <div className=\"help-content\">\n          <div className=\"help-item\">\n            <strong>1. Connect Wallet:</strong> Connect your Web3 wallet to view live prices\n          </div>\n          <div className=\"help-item\">\n            <strong>2. Select Feeds:</strong> Click on feeds to select them for your project\n          </div>\n          <div className=\"help-item\">\n            <strong>3. Copy Addresses:</strong> Use the copy button to get the contract address\n          </div>\n          <div className=\"help-item\">\n            <strong>4. Export Selection:</strong> Download your selected feeds as JSON\n          </div>\n          <div className=\"help-item\">\n            <strong>5. ETF Basket Calculator:</strong> Calculate weighted basket prices and price bands\n          </div>\n          <div className=\"help-item\">\n            <strong>6. Smart Contract Integration:</strong> Get ready-to-use parameters for your contracts\n          </div>\n        </div>\n        \n        <h3>🏗️ ETF Prediction Market Architecture</h3>\n        <div className=\"help-content\">\n          <div className=\"help-item\">\n            <strong>EtfFeedAggregator:</strong> Manages multiple Chainlink price feeds with staleness checks\n          </div>\n          <div className=\"help-item\">\n            <strong>BasketPricer:</strong> Calculates weighted basket prices and price bands for prediction markets\n          </div>\n          <div className=\"help-item\">\n            <strong>EtfPredictionMarket:</strong> Creates markets on whether ETF prices stay within specified bands\n          </div>\n          <div className=\"help-item\">\n            <strong>PredictionMarketVault:</strong> Manages collateral and payouts for prediction markets\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n  }\n  \n  export default ChainlinkFeeds; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}